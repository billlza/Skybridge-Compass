warning: 'skybridgecompassapp': found 1 file(s) which are unhandled; explicitly declare them as resources or exclude from the target
    /Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/WeatherShaders.metal
warning: 'starscream': found 1 file(s) which are unhandled; explicitly declare them as resources or exclude from the target
    /Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/.build/checkouts/Starscream/Sources/Info.plist
[0/1] Planning build
Building for debugging...
[0/7] Write swift-version-41C403C3136A4E2D.txt
[2/32] Compiling SkyBridgeCore NetworkMonitorCard.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/SystemMonitor/NetworkMonitorCard.swift:184:10: error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
  3 | /// 网络监控卡片 - 显示网络使用情况和统计信息
  4 | /// 符合macOS设计规范，提供详细的网络监控信息
  5 | public struct NetworkMonitorCard: View {
    |               `- note: add '@available' attribute to enclosing struct
  6 |     
  7 |     // MARK: - 属性
    :
 39 |     // MARK: - 视图主体
 40 |     
 41 |     public var body: some View {
    |                `- note: add '@available' attribute to enclosing property
 42 |         VStack(alignment: .leading, spacing: 16) {
 43 |             // 标题和连接状态
    :
182 |             startAnimations()
183 |         }
184 |         .onChange(of: uploadSpeed) { _, _ in
    |          |- error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
    |          `- note: add 'if #available' version check
185 |             triggerUploadAnimation()
186 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/SystemMonitor/NetworkMonitorCard.swift:187:10: error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
  3 | /// 网络监控卡片 - 显示网络使用情况和统计信息
  4 | /// 符合macOS设计规范，提供详细的网络监控信息
  5 | public struct NetworkMonitorCard: View {
    |               `- note: add '@available' attribute to enclosing struct
  6 |     
  7 |     // MARK: - 属性
    :
 39 |     // MARK: - 视图主体
 40 |     
 41 |     public var body: some View {
    |                `- note: add '@available' attribute to enclosing property
 42 |         VStack(alignment: .leading, spacing: 16) {
 43 |             // 标题和连接状态
    :
185 |             triggerUploadAnimation()
186 |         }
187 |         .onChange(of: downloadSpeed) { _, _ in
    |          |- error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
    |          `- note: add 'if #available' version check
188 |             triggerDownloadAnimation()
189 |         }
[3/32] Compiling SkyBridgeCore PerformanceChartCard.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/SystemMonitor/NetworkMonitorCard.swift:184:10: error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
  3 | /// 网络监控卡片 - 显示网络使用情况和统计信息
  4 | /// 符合macOS设计规范，提供详细的网络监控信息
  5 | public struct NetworkMonitorCard: View {
    |               `- note: add '@available' attribute to enclosing struct
  6 |     
  7 |     // MARK: - 属性
    :
 39 |     // MARK: - 视图主体
 40 |     
 41 |     public var body: some View {
    |                `- note: add '@available' attribute to enclosing property
 42 |         VStack(alignment: .leading, spacing: 16) {
 43 |             // 标题和连接状态
    :
182 |             startAnimations()
183 |         }
184 |         .onChange(of: uploadSpeed) { _, _ in
    |          |- error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
    |          `- note: add 'if #available' version check
185 |             triggerUploadAnimation()
186 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/SystemMonitor/NetworkMonitorCard.swift:187:10: error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
  3 | /// 网络监控卡片 - 显示网络使用情况和统计信息
  4 | /// 符合macOS设计规范，提供详细的网络监控信息
  5 | public struct NetworkMonitorCard: View {
    |               `- note: add '@available' attribute to enclosing struct
  6 |     
  7 |     // MARK: - 属性
    :
 39 |     // MARK: - 视图主体
 40 |     
 41 |     public var body: some View {
    |                `- note: add '@available' attribute to enclosing property
 42 |         VStack(alignment: .leading, spacing: 16) {
 43 |             // 标题和连接状态
    :
185 |             triggerUploadAnimation()
186 |         }
187 |         .onChange(of: downloadSpeed) { _, _ in
    |          |- error: 'onChange(of:initial:_:)' is only available in macOS 14.0 or newer
    |          `- note: add 'if #available' version check
188 |             triggerDownloadAnimation()
189 |         }
[4/32] Compiling SkyBridgeCore DynamicWallpaperManager.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:35:37: error: cannot find type 'PerformanceMonitor' in scope
 33 |     private var cancellables = Set<AnyCancellable>()
 34 |     private var renderTimer: Timer?
 35 |     private var performanceMonitor: PerformanceMonitor
    |                                     `- error: cannot find type 'PerformanceMonitor' in scope
 36 |     
 37 |     // Metal资源

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:61:66: error: argument passed to call that takes no arguments
 59 |         
 60 |         // 初始化服务组件
 61 |         self.renderingEngine = try Metal4RenderingEngine(device: device)
    |                                                                  `- error: argument passed to call that takes no arguments
 62 |         self.weatherDataService = WeatherDataService()
 63 |         self.locationService = WeatherLocationService()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:66:35: error: cannot find 'PerformanceMonitor' in scope
 64 |         self.mlPredictor = try WeatherMLPredictor()
 65 |         self.metalFXProcessor = try MetalFXProcessor(device: device)
 66 |         self.performanceMonitor = PerformanceMonitor()
    |                                   `- error: cannot find 'PerformanceMonitor' in scope
 67 |         
 68 |         // 设置渲染通道描述符

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:93:42: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
 91 |             
 92 |             // 获取天气数据
 93 |             try await weatherDataService.fetchWeatherData(for: location)
    |                                          `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
 94 |             
 95 |             // 启动渲染循环

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:89:17: warning: no 'async' operations occur within 'await' expression
 87 |         do {
 88 |             // 请求位置权限并获取当前位置
 89 |             try await locationService.requestLocationPermission()
    |                 `- warning: no 'async' operations occur within 'await' expression
 90 |             let location = try await locationService.getCurrentLocation()
 91 |             

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:89:13: warning: no calls to throwing functions occur within 'try' expression
 87 |         do {
 88 |             // 请求位置权限并获取当前位置
 89 |             try await locationService.requestLocationPermission()
    |             `- warning: no calls to throwing functions occur within 'try' expression
 90 |             let location = try await locationService.getCurrentLocation()
 91 |             

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:116:13: warning: no 'async' operations occur within 'await' expression
114 |         // 停止所有服务
115 |         Task {
116 |             await weatherDataService.stopWeatherUpdates()
    |             `- warning: no 'async' operations occur within 'await' expression
117 |             await locationService.stopLocationUpdates()
118 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:117:13: warning: no 'async' operations occur within 'await' expression
115 |         Task {
116 |             await weatherDataService.stopWeatherUpdates()
117 |             await locationService.stopLocationUpdates()
    |             `- warning: no 'async' operations occur within 'await' expression
118 |         }
119 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:130:29: error: value of type 'Metal4RenderingEngine' has no member 'enableEnergyEfficiencyMode'
128 |         if isEnergyEfficiencyEnabled {
129 |             renderingQuality = .medium
130 |             renderingEngine.enableEnergyEfficiencyMode()
    |                             `- error: value of type 'Metal4RenderingEngine' has no member 'enableEnergyEfficiencyMode'
131 |             print("🔋 已启用能效模式")
132 |         } else {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:134:29: error: value of type 'Metal4RenderingEngine' has no member 'disableEnergyEfficiencyMode'
132 |         } else {
133 |             renderingQuality = .high
134 |             renderingEngine.disableEnergyEfficiencyMode()
    |                             `- error: value of type 'Metal4RenderingEngine' has no member 'disableEnergyEfficiencyMode'
135 |             print("⚡ 已禁用能效模式")
136 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:143:42: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
141 |         do {
142 |             let location = try await locationService.getCurrentLocation()
143 |             try await weatherDataService.fetchWeatherData(for: location)
    |                                          `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
144 |             print("🔄 天气数据刷新成功")
145 |         } catch {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:153:25: error: value of type 'Metal4RenderingEngine' has no member 'setRenderingQuality'
151 |     public func setRenderingQuality(_ quality: RenderingQuality) {
152 |         renderingQuality = quality
153 |         renderingEngine.setRenderingQuality(quality)
    |                         `- error: value of type 'Metal4RenderingEngine' has no member 'setRenderingQuality'
154 |         print("🎨 渲染质量已设置为: \(quality)")
155 |     }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:162:28: error: value of type 'WeatherDataService' has no member '$currentWeatherData'
160 |     private func setupDataBindings() {
161 |         // 监听天气数据变化
162 |         weatherDataService.$currentWeatherData
    |                            `- error: value of type 'WeatherDataService' has no member '$currentWeatherData'
163 |             .compactMap { $0 }
164 |             .sink { [weak self] weatherData in

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:176:57: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
174 |             .sink { [weak self] location in
175 |                 Task {
176 |                     try? await self?.weatherDataService.fetchWeatherData(for: location)
    |                                                         `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
177 |                 }
178 |             }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:225:39: error: value of type 'Metal4RenderingEngine' has no member 'render'
223 |             
224 |             // 执行渲染
225 |             try await renderingEngine.render(
    |                                       `- error: value of type 'Metal4RenderingEngine' has no member 'render'
226 |                 commandBuffer: commandBuffer,
227 |                 renderPassDescriptor: renderPassDescriptor,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:238:27: error: instance method 'waitUntilCompleted' is unavailable from asynchronous contexts; Use 'await completed()' instead.
236 |             // 提交命令缓冲区
237 |             commandBuffer.commit()
238 |             commandBuffer.waitUntilCompleted()
    |                           `- error: instance method 'waitUntilCompleted' is unavailable from asynchronous contexts; Use 'await completed()' instead.
239 |             
240 |             // 更新性能指标

Metal.MTLCommandBuffer.waitUntilCompleted:2:6: note: 'waitUntilCompleted()' declared here
1 | protocol MTLCommandBuffer {
2 | func waitUntilCompleted()}
  |      `- note: 'waitUntilCompleted()' declared here
3 | 

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:251:46: error: value of type 'WeatherDataService' has no member 'currentWeatherData'
249 |     /// 创建渲染参数
250 |     private func createRenderingParameters() -> WeatherRenderingParameters {
251 |         let weatherData = weatherDataService.currentWeatherData ?? WeatherData.default
    |                                              `- error: value of type 'WeatherDataService' has no member 'currentWeatherData'
252 |         
253 |         return WeatherRenderingParameters(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:253:16: error: the compiler is unable to type-check this expression in reasonable time; try breaking up the expression into distinct sub-expressions
251 |         let weatherData = weatherDataService.currentWeatherData ?? WeatherData.default
252 |         
253 |         return WeatherRenderingParameters(
    |                `- error: the compiler is unable to type-check this expression in reasonable time; try breaking up the expression into distinct sub-expressions
254 |             weatherType: weatherData.weatherType,
255 |             intensity: weatherData.intensity,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:300:59: error: value of type 'WeatherDataService' has no member 'currentWeatherData'
298 |     /// 判断是否需要切换壁纸
299 |     private func shouldSwitchWallpaper(to weatherType: WeatherType) -> Bool {
300 |         guard let currentWeatherData = weatherDataService.currentWeatherData else {
    |                                                           `- error: value of type 'WeatherDataService' has no member 'currentWeatherData'
301 |             return true
302 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:324:11: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
322 |             print("✅ 壁纸切换完成")
323 |             
324 |         } catch {
    |           `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
325 |             print("❌ 壁纸切换失败: \(error)")
326 |             currentWallpaperState = .error(error)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:354:45: error: value of type 'Metal4RenderingEngine' has no member 'generateWallpaperTexture'
352 |         
353 |         // 使用渲染引擎生成壁纸纹理
354 |         let texture = await renderingEngine.generateWallpaperTexture(
    |                                             `- error: value of type 'Metal4RenderingEngine' has no member 'generateWallpaperTexture'
355 |             for: weatherType,
356 |             parameters: renderingParams

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:382:13: warning: initialization of immutable value 'now' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
380 |     /// 清理过期缓存
381 |     private func cleanupExpiredCache() {
382 |         let now = Date()
    |             `- warning: initialization of immutable value 'now' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
383 |         wallpaperCache = wallpaperCache.filter { _, wallpaper in
384 |             !wallpaper.isExpired

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:418:31: error: value of type 'Metal4RenderingEngine' has no member 'prepareRenderingResources'
416 |     /// 准备渲染资源
417 |     private func prepareRenderingResources(for weatherType: WeatherType) async {
418 |         await renderingEngine.prepareRenderingResources(for: weatherType)
    |                               `- error: value of type 'Metal4RenderingEngine' has no member 'prepareRenderingResources'
419 |     }
420 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:430:35: error: value of type 'Metal4RenderingEngine' has no member 'setTransitionProgress'
428 |         for i in 0...steps {
429 |             let progress = Float(i) / Float(steps)
430 |             await renderingEngine.setTransitionProgress(progress)
    |                                   `- error: value of type 'Metal4RenderingEngine' has no member 'setTransitionProgress'
431 |             
432 |             try? await Task.sleep(nanoseconds: UInt64(stepDuration * 1_000_000_000))

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:438:58: error: cannot infer type of closure parameter 'metrics' without a type annotation
436 |     /// 启动性能监控
437 |     private func startPerformanceMonitoring() {
438 |         performanceMonitor.startMonitoring { [weak self] metrics in
    |                                                          `- error: cannot infer type of closure parameter 'metrics' without a type annotation
439 |             Task { @MainActor in
440 |                 self?.performanceMetrics = metrics

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:56:29: error: 'CADisplayLink' is only available in macOS 14.0 or newer
  7 | /// Metal 4.0 高性能渲染引擎 - 集成AI推理、MetalFX增强和新一代GPU功能
  8 | @MainActor
  9 | public class Metal4Engine: NSObject, ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 10 |     
 11 |     // MARK: - 发布属性
    :
 54 |     
 55 |     private var performanceMonitor: Metal4PerformanceMonitor!
 56 |     private var frameTimer: CADisplayLink?
    |                             `- error: 'CADisplayLink' is only available in macOS 14.0 or newer
 57 |     private var lastFrameTime: CFTimeInterval = 0
 58 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:718:13: warning: initialization of immutable value 'frameTime' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
716 |     
717 |     func endFrame() {
718 |         let frameTime = CACurrentMediaTime() - frameStartTime
    |             `- warning: initialization of immutable value 'frameTime' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
719 |         // 记录性能数据
720 |     }
[5/32] Compiling SkyBridgeCore Metal4Engine.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:35:37: error: cannot find type 'PerformanceMonitor' in scope
 33 |     private var cancellables = Set<AnyCancellable>()
 34 |     private var renderTimer: Timer?
 35 |     private var performanceMonitor: PerformanceMonitor
    |                                     `- error: cannot find type 'PerformanceMonitor' in scope
 36 |     
 37 |     // Metal资源

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:61:66: error: argument passed to call that takes no arguments
 59 |         
 60 |         // 初始化服务组件
 61 |         self.renderingEngine = try Metal4RenderingEngine(device: device)
    |                                                                  `- error: argument passed to call that takes no arguments
 62 |         self.weatherDataService = WeatherDataService()
 63 |         self.locationService = WeatherLocationService()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:66:35: error: cannot find 'PerformanceMonitor' in scope
 64 |         self.mlPredictor = try WeatherMLPredictor()
 65 |         self.metalFXProcessor = try MetalFXProcessor(device: device)
 66 |         self.performanceMonitor = PerformanceMonitor()
    |                                   `- error: cannot find 'PerformanceMonitor' in scope
 67 |         
 68 |         // 设置渲染通道描述符

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:93:42: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
 91 |             
 92 |             // 获取天气数据
 93 |             try await weatherDataService.fetchWeatherData(for: location)
    |                                          `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
 94 |             
 95 |             // 启动渲染循环

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:89:17: warning: no 'async' operations occur within 'await' expression
 87 |         do {
 88 |             // 请求位置权限并获取当前位置
 89 |             try await locationService.requestLocationPermission()
    |                 `- warning: no 'async' operations occur within 'await' expression
 90 |             let location = try await locationService.getCurrentLocation()
 91 |             

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:89:13: warning: no calls to throwing functions occur within 'try' expression
 87 |         do {
 88 |             // 请求位置权限并获取当前位置
 89 |             try await locationService.requestLocationPermission()
    |             `- warning: no calls to throwing functions occur within 'try' expression
 90 |             let location = try await locationService.getCurrentLocation()
 91 |             

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:116:13: warning: no 'async' operations occur within 'await' expression
114 |         // 停止所有服务
115 |         Task {
116 |             await weatherDataService.stopWeatherUpdates()
    |             `- warning: no 'async' operations occur within 'await' expression
117 |             await locationService.stopLocationUpdates()
118 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:117:13: warning: no 'async' operations occur within 'await' expression
115 |         Task {
116 |             await weatherDataService.stopWeatherUpdates()
117 |             await locationService.stopLocationUpdates()
    |             `- warning: no 'async' operations occur within 'await' expression
118 |         }
119 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:130:29: error: value of type 'Metal4RenderingEngine' has no member 'enableEnergyEfficiencyMode'
128 |         if isEnergyEfficiencyEnabled {
129 |             renderingQuality = .medium
130 |             renderingEngine.enableEnergyEfficiencyMode()
    |                             `- error: value of type 'Metal4RenderingEngine' has no member 'enableEnergyEfficiencyMode'
131 |             print("🔋 已启用能效模式")
132 |         } else {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:134:29: error: value of type 'Metal4RenderingEngine' has no member 'disableEnergyEfficiencyMode'
132 |         } else {
133 |             renderingQuality = .high
134 |             renderingEngine.disableEnergyEfficiencyMode()
    |                             `- error: value of type 'Metal4RenderingEngine' has no member 'disableEnergyEfficiencyMode'
135 |             print("⚡ 已禁用能效模式")
136 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:143:42: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
141 |         do {
142 |             let location = try await locationService.getCurrentLocation()
143 |             try await weatherDataService.fetchWeatherData(for: location)
    |                                          `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
144 |             print("🔄 天气数据刷新成功")
145 |         } catch {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:153:25: error: value of type 'Metal4RenderingEngine' has no member 'setRenderingQuality'
151 |     public func setRenderingQuality(_ quality: RenderingQuality) {
152 |         renderingQuality = quality
153 |         renderingEngine.setRenderingQuality(quality)
    |                         `- error: value of type 'Metal4RenderingEngine' has no member 'setRenderingQuality'
154 |         print("🎨 渲染质量已设置为: \(quality)")
155 |     }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:162:28: error: value of type 'WeatherDataService' has no member '$currentWeatherData'
160 |     private func setupDataBindings() {
161 |         // 监听天气数据变化
162 |         weatherDataService.$currentWeatherData
    |                            `- error: value of type 'WeatherDataService' has no member '$currentWeatherData'
163 |             .compactMap { $0 }
164 |             .sink { [weak self] weatherData in

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:176:57: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
174 |             .sink { [weak self] location in
175 |                 Task {
176 |                     try? await self?.weatherDataService.fetchWeatherData(for: location)
    |                                                         `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
177 |                 }
178 |             }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:225:39: error: value of type 'Metal4RenderingEngine' has no member 'render'
223 |             
224 |             // 执行渲染
225 |             try await renderingEngine.render(
    |                                       `- error: value of type 'Metal4RenderingEngine' has no member 'render'
226 |                 commandBuffer: commandBuffer,
227 |                 renderPassDescriptor: renderPassDescriptor,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:238:27: error: instance method 'waitUntilCompleted' is unavailable from asynchronous contexts; Use 'await completed()' instead.
236 |             // 提交命令缓冲区
237 |             commandBuffer.commit()
238 |             commandBuffer.waitUntilCompleted()
    |                           `- error: instance method 'waitUntilCompleted' is unavailable from asynchronous contexts; Use 'await completed()' instead.
239 |             
240 |             // 更新性能指标

Metal.MTLCommandBuffer.waitUntilCompleted:2:6: note: 'waitUntilCompleted()' declared here
1 | protocol MTLCommandBuffer {
2 | func waitUntilCompleted()}
  |      `- note: 'waitUntilCompleted()' declared here
3 | 

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:251:46: error: value of type 'WeatherDataService' has no member 'currentWeatherData'
249 |     /// 创建渲染参数
250 |     private func createRenderingParameters() -> WeatherRenderingParameters {
251 |         let weatherData = weatherDataService.currentWeatherData ?? WeatherData.default
    |                                              `- error: value of type 'WeatherDataService' has no member 'currentWeatherData'
252 |         
253 |         return WeatherRenderingParameters(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:253:16: error: the compiler is unable to type-check this expression in reasonable time; try breaking up the expression into distinct sub-expressions
251 |         let weatherData = weatherDataService.currentWeatherData ?? WeatherData.default
252 |         
253 |         return WeatherRenderingParameters(
    |                `- error: the compiler is unable to type-check this expression in reasonable time; try breaking up the expression into distinct sub-expressions
254 |             weatherType: weatherData.weatherType,
255 |             intensity: weatherData.intensity,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:300:59: error: value of type 'WeatherDataService' has no member 'currentWeatherData'
298 |     /// 判断是否需要切换壁纸
299 |     private func shouldSwitchWallpaper(to weatherType: WeatherType) -> Bool {
300 |         guard let currentWeatherData = weatherDataService.currentWeatherData else {
    |                                                           `- error: value of type 'WeatherDataService' has no member 'currentWeatherData'
301 |             return true
302 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:324:11: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
322 |             print("✅ 壁纸切换完成")
323 |             
324 |         } catch {
    |           `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
325 |             print("❌ 壁纸切换失败: \(error)")
326 |             currentWallpaperState = .error(error)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:354:45: error: value of type 'Metal4RenderingEngine' has no member 'generateWallpaperTexture'
352 |         
353 |         // 使用渲染引擎生成壁纸纹理
354 |         let texture = await renderingEngine.generateWallpaperTexture(
    |                                             `- error: value of type 'Metal4RenderingEngine' has no member 'generateWallpaperTexture'
355 |             for: weatherType,
356 |             parameters: renderingParams

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:382:13: warning: initialization of immutable value 'now' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
380 |     /// 清理过期缓存
381 |     private func cleanupExpiredCache() {
382 |         let now = Date()
    |             `- warning: initialization of immutable value 'now' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
383 |         wallpaperCache = wallpaperCache.filter { _, wallpaper in
384 |             !wallpaper.isExpired

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:418:31: error: value of type 'Metal4RenderingEngine' has no member 'prepareRenderingResources'
416 |     /// 准备渲染资源
417 |     private func prepareRenderingResources(for weatherType: WeatherType) async {
418 |         await renderingEngine.prepareRenderingResources(for: weatherType)
    |                               `- error: value of type 'Metal4RenderingEngine' has no member 'prepareRenderingResources'
419 |     }
420 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:430:35: error: value of type 'Metal4RenderingEngine' has no member 'setTransitionProgress'
428 |         for i in 0...steps {
429 |             let progress = Float(i) / Float(steps)
430 |             await renderingEngine.setTransitionProgress(progress)
    |                                   `- error: value of type 'Metal4RenderingEngine' has no member 'setTransitionProgress'
431 |             
432 |             try? await Task.sleep(nanoseconds: UInt64(stepDuration * 1_000_000_000))

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:438:58: error: cannot infer type of closure parameter 'metrics' without a type annotation
436 |     /// 启动性能监控
437 |     private func startPerformanceMonitoring() {
438 |         performanceMonitor.startMonitoring { [weak self] metrics in
    |                                                          `- error: cannot infer type of closure parameter 'metrics' without a type annotation
439 |             Task { @MainActor in
440 |                 self?.performanceMetrics = metrics

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:56:29: error: 'CADisplayLink' is only available in macOS 14.0 or newer
  7 | /// Metal 4.0 高性能渲染引擎 - 集成AI推理、MetalFX增强和新一代GPU功能
  8 | @MainActor
  9 | public class Metal4Engine: NSObject, ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 10 |     
 11 |     // MARK: - 发布属性
    :
 54 |     
 55 |     private var performanceMonitor: Metal4PerformanceMonitor!
 56 |     private var frameTimer: CADisplayLink?
    |                             `- error: 'CADisplayLink' is only available in macOS 14.0 or newer
 57 |     private var lastFrameTime: CFTimeInterval = 0
 58 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:718:13: warning: initialization of immutable value 'frameTime' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
716 |     
717 |     func endFrame() {
718 |         let frameTime = CACurrentMediaTime() - frameStartTime
    |             `- warning: initialization of immutable value 'frameTime' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
719 |         // 记录性能数据
720 |     }
[6/32] Compiling SkyBridgeCore Metal4RenderView.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:35:37: error: cannot find type 'PerformanceMonitor' in scope
 33 |     private var cancellables = Set<AnyCancellable>()
 34 |     private var renderTimer: Timer?
 35 |     private var performanceMonitor: PerformanceMonitor
    |                                     `- error: cannot find type 'PerformanceMonitor' in scope
 36 |     
 37 |     // Metal资源

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:61:66: error: argument passed to call that takes no arguments
 59 |         
 60 |         // 初始化服务组件
 61 |         self.renderingEngine = try Metal4RenderingEngine(device: device)
    |                                                                  `- error: argument passed to call that takes no arguments
 62 |         self.weatherDataService = WeatherDataService()
 63 |         self.locationService = WeatherLocationService()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:66:35: error: cannot find 'PerformanceMonitor' in scope
 64 |         self.mlPredictor = try WeatherMLPredictor()
 65 |         self.metalFXProcessor = try MetalFXProcessor(device: device)
 66 |         self.performanceMonitor = PerformanceMonitor()
    |                                   `- error: cannot find 'PerformanceMonitor' in scope
 67 |         
 68 |         // 设置渲染通道描述符

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:93:42: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
 91 |             
 92 |             // 获取天气数据
 93 |             try await weatherDataService.fetchWeatherData(for: location)
    |                                          `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
 94 |             
 95 |             // 启动渲染循环

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:89:17: warning: no 'async' operations occur within 'await' expression
 87 |         do {
 88 |             // 请求位置权限并获取当前位置
 89 |             try await locationService.requestLocationPermission()
    |                 `- warning: no 'async' operations occur within 'await' expression
 90 |             let location = try await locationService.getCurrentLocation()
 91 |             

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:89:13: warning: no calls to throwing functions occur within 'try' expression
 87 |         do {
 88 |             // 请求位置权限并获取当前位置
 89 |             try await locationService.requestLocationPermission()
    |             `- warning: no calls to throwing functions occur within 'try' expression
 90 |             let location = try await locationService.getCurrentLocation()
 91 |             

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:116:13: warning: no 'async' operations occur within 'await' expression
114 |         // 停止所有服务
115 |         Task {
116 |             await weatherDataService.stopWeatherUpdates()
    |             `- warning: no 'async' operations occur within 'await' expression
117 |             await locationService.stopLocationUpdates()
118 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:117:13: warning: no 'async' operations occur within 'await' expression
115 |         Task {
116 |             await weatherDataService.stopWeatherUpdates()
117 |             await locationService.stopLocationUpdates()
    |             `- warning: no 'async' operations occur within 'await' expression
118 |         }
119 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:130:29: error: value of type 'Metal4RenderingEngine' has no member 'enableEnergyEfficiencyMode'
128 |         if isEnergyEfficiencyEnabled {
129 |             renderingQuality = .medium
130 |             renderingEngine.enableEnergyEfficiencyMode()
    |                             `- error: value of type 'Metal4RenderingEngine' has no member 'enableEnergyEfficiencyMode'
131 |             print("🔋 已启用能效模式")
132 |         } else {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:134:29: error: value of type 'Metal4RenderingEngine' has no member 'disableEnergyEfficiencyMode'
132 |         } else {
133 |             renderingQuality = .high
134 |             renderingEngine.disableEnergyEfficiencyMode()
    |                             `- error: value of type 'Metal4RenderingEngine' has no member 'disableEnergyEfficiencyMode'
135 |             print("⚡ 已禁用能效模式")
136 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:143:42: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
141 |         do {
142 |             let location = try await locationService.getCurrentLocation()
143 |             try await weatherDataService.fetchWeatherData(for: location)
    |                                          `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
144 |             print("🔄 天气数据刷新成功")
145 |         } catch {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:153:25: error: value of type 'Metal4RenderingEngine' has no member 'setRenderingQuality'
151 |     public func setRenderingQuality(_ quality: RenderingQuality) {
152 |         renderingQuality = quality
153 |         renderingEngine.setRenderingQuality(quality)
    |                         `- error: value of type 'Metal4RenderingEngine' has no member 'setRenderingQuality'
154 |         print("🎨 渲染质量已设置为: \(quality)")
155 |     }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:162:28: error: value of type 'WeatherDataService' has no member '$currentWeatherData'
160 |     private func setupDataBindings() {
161 |         // 监听天气数据变化
162 |         weatherDataService.$currentWeatherData
    |                            `- error: value of type 'WeatherDataService' has no member '$currentWeatherData'
163 |             .compactMap { $0 }
164 |             .sink { [weak self] weatherData in

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:176:57: error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
174 |             .sink { [weak self] location in
175 |                 Task {
176 |                     try? await self?.weatherDataService.fetchWeatherData(for: location)
    |                                                         `- error: value of type 'WeatherDataService' has no member 'fetchWeatherData'
177 |                 }
178 |             }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:225:39: error: value of type 'Metal4RenderingEngine' has no member 'render'
223 |             
224 |             // 执行渲染
225 |             try await renderingEngine.render(
    |                                       `- error: value of type 'Metal4RenderingEngine' has no member 'render'
226 |                 commandBuffer: commandBuffer,
227 |                 renderPassDescriptor: renderPassDescriptor,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:238:27: error: instance method 'waitUntilCompleted' is unavailable from asynchronous contexts; Use 'await completed()' instead.
236 |             // 提交命令缓冲区
237 |             commandBuffer.commit()
238 |             commandBuffer.waitUntilCompleted()
    |                           `- error: instance method 'waitUntilCompleted' is unavailable from asynchronous contexts; Use 'await completed()' instead.
239 |             
240 |             // 更新性能指标

Metal.MTLCommandBuffer.waitUntilCompleted:2:6: note: 'waitUntilCompleted()' declared here
1 | protocol MTLCommandBuffer {
2 | func waitUntilCompleted()}
  |      `- note: 'waitUntilCompleted()' declared here
3 | 

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:251:46: error: value of type 'WeatherDataService' has no member 'currentWeatherData'
249 |     /// 创建渲染参数
250 |     private func createRenderingParameters() -> WeatherRenderingParameters {
251 |         let weatherData = weatherDataService.currentWeatherData ?? WeatherData.default
    |                                              `- error: value of type 'WeatherDataService' has no member 'currentWeatherData'
252 |         
253 |         return WeatherRenderingParameters(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:253:16: error: the compiler is unable to type-check this expression in reasonable time; try breaking up the expression into distinct sub-expressions
251 |         let weatherData = weatherDataService.currentWeatherData ?? WeatherData.default
252 |         
253 |         return WeatherRenderingParameters(
    |                `- error: the compiler is unable to type-check this expression in reasonable time; try breaking up the expression into distinct sub-expressions
254 |             weatherType: weatherData.weatherType,
255 |             intensity: weatherData.intensity,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:300:59: error: value of type 'WeatherDataService' has no member 'currentWeatherData'
298 |     /// 判断是否需要切换壁纸
299 |     private func shouldSwitchWallpaper(to weatherType: WeatherType) -> Bool {
300 |         guard let currentWeatherData = weatherDataService.currentWeatherData else {
    |                                                           `- error: value of type 'WeatherDataService' has no member 'currentWeatherData'
301 |             return true
302 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:324:11: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
322 |             print("✅ 壁纸切换完成")
323 |             
324 |         } catch {
    |           `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
325 |             print("❌ 壁纸切换失败: \(error)")
326 |             currentWallpaperState = .error(error)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:354:45: error: value of type 'Metal4RenderingEngine' has no member 'generateWallpaperTexture'
352 |         
353 |         // 使用渲染引擎生成壁纸纹理
354 |         let texture = await renderingEngine.generateWallpaperTexture(
    |                                             `- error: value of type 'Metal4RenderingEngine' has no member 'generateWallpaperTexture'
355 |             for: weatherType,
356 |             parameters: renderingParams

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:382:13: warning: initialization of immutable value 'now' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
380 |     /// 清理过期缓存
381 |     private func cleanupExpiredCache() {
382 |         let now = Date()
    |             `- warning: initialization of immutable value 'now' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
383 |         wallpaperCache = wallpaperCache.filter { _, wallpaper in
384 |             !wallpaper.isExpired

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:418:31: error: value of type 'Metal4RenderingEngine' has no member 'prepareRenderingResources'
416 |     /// 准备渲染资源
417 |     private func prepareRenderingResources(for weatherType: WeatherType) async {
418 |         await renderingEngine.prepareRenderingResources(for: weatherType)
    |                               `- error: value of type 'Metal4RenderingEngine' has no member 'prepareRenderingResources'
419 |     }
420 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:430:35: error: value of type 'Metal4RenderingEngine' has no member 'setTransitionProgress'
428 |         for i in 0...steps {
429 |             let progress = Float(i) / Float(steps)
430 |             await renderingEngine.setTransitionProgress(progress)
    |                                   `- error: value of type 'Metal4RenderingEngine' has no member 'setTransitionProgress'
431 |             
432 |             try? await Task.sleep(nanoseconds: UInt64(stepDuration * 1_000_000_000))

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:438:58: error: cannot infer type of closure parameter 'metrics' without a type annotation
436 |     /// 启动性能监控
437 |     private func startPerformanceMonitoring() {
438 |         performanceMonitor.startMonitoring { [weak self] metrics in
    |                                                          `- error: cannot infer type of closure parameter 'metrics' without a type annotation
439 |             Task { @MainActor in
440 |                 self?.performanceMetrics = metrics

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:56:29: error: 'CADisplayLink' is only available in macOS 14.0 or newer
  7 | /// Metal 4.0 高性能渲染引擎 - 集成AI推理、MetalFX增强和新一代GPU功能
  8 | @MainActor
  9 | public class Metal4Engine: NSObject, ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 10 |     
 11 |     // MARK: - 发布属性
    :
 54 |     
 55 |     private var performanceMonitor: Metal4PerformanceMonitor!
 56 |     private var frameTimer: CADisplayLink?
    |                             `- error: 'CADisplayLink' is only available in macOS 14.0 or newer
 57 |     private var lastFrameTime: CFTimeInterval = 0
 58 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:718:13: warning: initialization of immutable value 'frameTime' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
716 |     
717 |     func endFrame() {
718 |         let frameTime = CACurrentMediaTime() - frameStartTime
    |             `- warning: initialization of immutable value 'frameTime' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
719 |         // 记录性能数据
720 |     }
[7/34] Compiling SkyBridgeCore WeatherLocationService.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Weather/WeatherLocationService.swift:57:21: error: cannot access property 'locationUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 55 |     deinit {
 56 |         // 在 deinit 中直接调用，避免 Task 捕获 self
 57 |         let timer = locationUpdateTimer
    |                     `- error: cannot access property 'locationUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 58 |         timer?.invalidate()
 59 |         // 移除 locationManager.stopUpdatingLocation() 调用以避免并发问题

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
[8/34] Compiling SkyBridgeCore resource_bundle_accessor.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Weather/WeatherLocationService.swift:57:21: error: cannot access property 'locationUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 55 |     deinit {
 56 |         // 在 deinit 中直接调用，避免 Task 捕获 self
 57 |         let timer = locationUpdateTimer
    |                     `- error: cannot access property 'locationUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 58 |         timer?.invalidate()
 59 |         // 移除 locationManager.stopUpdatingLocation() 调用以避免并发问题

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
error: emit-module command failed with exit code 1 (use -v to see invocation)
[9/34] Emitting module SkyBridgeCore
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:55:23: error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
  7 | 
  8 | /// 天气数据结构
  9 | public struct WeatherData {
    |               `- note: consider making struct 'WeatherData' conform to the 'Sendable' protocol
 10 |     public let weatherType: WeatherType
 11 |     public let intensity: Double
    :
 53 |     
 54 |     /// 默认天气数据
 55 |     public static let `default` = WeatherData(
    |                       |- error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'default' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
 56 |         weatherType: .clear,
 57 |         intensity: 0.5,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:482:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
480 |         gpuUsage: Float = 0.0,
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
483 |         powerState: PowerManager.PowerState = .normal,
484 |         batteryLevel: Double = 1.0,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:483:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
483 |         powerState: PowerManager.PowerState = .normal,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
484 |         batteryLevel: Double = 1.0,
485 |         timestamp: Date = Date()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:23:40: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
  8 | /// 性能协调器 - 统一管理所有性能优化组件
  9 | @MainActor
 10 | public class PerformanceCoordinator: ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 11 |     
 12 |     // MARK: - 发布属性
    :
 21 |     private let thermalManager: ThermalManager
 22 |     private let powerManager: PowerManager
 23 |     private let appleSiliconOptimizer: AppleSiliconOptimizer?
    |                                        `- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
 24 |     private let metalPerformanceOptimizer: MetalPerformanceOptimizer
 25 |     private let metalFXProcessor: MetalFXProcessor?

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:259:74: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
257 |     
258 |     /// 处理热量状态变化
259 |     private func handleThermalStateChange(_ thermalState: ThermalManager.ThermalState) async {
    |                                                                          `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
260 |         logger.info("🌡️ 热量状态变化处理: \(thermalState.rawValue)")
261 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:265:68: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
263 |     
264 |     /// 处理电源状态变化
265 |     private func handlePowerStateChange(_ powerState: PowerManager.PowerState) async {
    |                                                                    `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
266 |         logger.info("🔋 电源状态变化处理: \(powerState.rawValue)")
267 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:280:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
278 |     /// 更新性能指标
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
281 |         powerState: PowerManager.PowerState,
282 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:281:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
281 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
282 |         batteryLevel: Double,
283 |         metalStats: PerformanceStats

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:300:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
298 |     /// 计算整体性能状态
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
301 |         powerState: PowerManager.PowerState,
302 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:301:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
301 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
302 |         batteryLevel: Double,
303 |         frameRate: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:471:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
469 |     public let gpuUsage: Float
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
472 |     public let powerState: PowerManager.PowerState
473 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:472:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
472 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
473 |     public let batteryLevel: Double
474 |     public let timestamp: Date

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:501:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
499 | /// 详细性能报告
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
502 |     public let powerState: PowerManager.PowerState
503 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:502:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
502 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
503 |     public let batteryLevel: Double
504 |     public let cpuTemperature: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:516:64: error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
514 | public struct PerformanceProfile {
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    |                                                                `- error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
518 |     public let targetFrameRate: Int

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:8:14: note: 'MetalPerformanceOptimizer' declared here
  6 | /// Metal性能优化器 - 专门针对Metal渲染管线的性能优化
  7 | @MainActor
  8 | public class MetalPerformanceOptimizer {
    |              `- note: 'MetalPerformanceOptimizer' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:517:49: error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
    |                                                 `- error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
518 |     public let targetFrameRate: Int
519 |     public let optimizations: [OptimizationType]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/MetalFXProcessor.swift:8:14: note: 'MetalFXProcessor' declared here
  6 | /// MetalFX处理器 - 实现画质增强和性能优化
  7 | @MainActor
  8 | public class MetalFXProcessor {
    |              `- note: 'MetalFXProcessor' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:522:23: error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
512 | 
513 | /// 性能配置文件
514 | public struct PerformanceProfile {
    |               `- note: consider making struct 'PerformanceProfile' conform to the 'Sendable' protocol
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    :
520 |     
521 |     /// 预定义的性能配置
522 |     public static let profiles: [PerformanceProfile] = [
    |                       |- error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'profiles' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
523 |         PerformanceProfile(
524 |             name: "最高质量",

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:525:36: error: cannot infer contextual base in reference to member 'highPerformance'
523 |         PerformanceProfile(
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
    |                                    `- error: cannot infer contextual base in reference to member 'highPerformance'
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:526:30: error: cannot infer contextual base in reference to member 'quality'
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
526 |             metalFXQuality: .quality,
    |                              `- error: cannot infer contextual base in reference to member 'quality'
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:49: error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                                                 `- error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:532:36: error: cannot infer contextual base in reference to member 'balanced'
530 |         PerformanceProfile(
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
    |                                    `- error: cannot infer contextual base in reference to member 'balanced'
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:533:30: error: cannot infer contextual base in reference to member 'balanced'
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
533 |             metalFXQuality: .balanced,
    |                              `- error: cannot infer contextual base in reference to member 'balanced'
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:49: error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                                                 `- error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:539:36: error: cannot infer contextual base in reference to member 'powerEfficient'
537 |         PerformanceProfile(
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
    |                                    `- error: cannot infer contextual base in reference to member 'powerEfficient'
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:540:30: error: cannot infer contextual base in reference to member 'performance'
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
540 |             metalFXQuality: .performance,
    |                              `- error: cannot infer contextual base in reference to member 'performance'
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:30: error: reference to member 'powerSaving' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                              `- error: reference to member 'powerSaving' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:44: error: reference to member 'reducedQuality' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                                            `- error: reference to member 'reducedQuality' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/DynamicWallpaperManager.swift:35:37: error: cannot find type 'PerformanceMonitor' in scope
 33 |     private var cancellables = Set<AnyCancellable>()
 34 |     private var renderTimer: Timer?
 35 |     private var performanceMonitor: PerformanceMonitor
    |                                     `- error: cannot find type 'PerformanceMonitor' in scope
 36 |     
 37 |     // Metal资源

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4Engine.swift:56:29: error: 'CADisplayLink' is only available in macOS 14.0 or newer
  7 | /// Metal 4.0 高性能渲染引擎 - 集成AI推理、MetalFX增强和新一代GPU功能
  8 | @MainActor
  9 | public class Metal4Engine: NSObject, ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 10 |     
 11 |     // MARK: - 发布属性
    :
 54 |     
 55 |     private var performanceMonitor: Metal4PerformanceMonitor!
 56 |     private var frameTimer: CADisplayLink?
    |                             `- error: 'CADisplayLink' is only available in macOS 14.0 or newer
 57 |     private var lastFrameTime: CFTimeInterval = 0
 58 |     

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
[10/34] Compiling SkyBridgeCore Metal4RenderingEngine.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:120:19: error: call can throw but is not marked with 'try'
118 |             
119 |             // 初始化光线追踪
120 |             await setupRayTracing()
    |                   |- error: call can throw but is not marked with 'try'
    |                   |- note: did you mean to use 'try'?
    |                   |- note: did you mean to handle error as optional value?
    |                   `- note: did you mean to disable error propagation?
121 |             
122 |             // 初始化粒子系统

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:123:19: error: call can throw but is not marked with 'try'
121 |             
122 |             // 初始化粒子系统
123 |             await setupParticleSystem()
    |                   |- error: call can throw but is not marked with 'try'
    |                   |- note: did you mean to use 'try'?
    |                   |- note: did you mean to handle error as optional value?
    |                   `- note: did you mean to disable error propagation?
124 |             
125 |             // 初始化MetalFX

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:126:19: error: call can throw but is not marked with 'try'
124 |             
125 |             // 初始化MetalFX
126 |             await setupMetalFX()
    |                   |- error: call can throw but is not marked with 'try'
    |                   |- note: did you mean to use 'try'?
    |                   |- note: did you mean to handle error as optional value?
    |                   `- note: did you mean to disable error propagation?
127 |             
128 |             // 创建渲染资源

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:205:45: error: reference to property 'particleCount' in closure requires explicit use of 'self' to make capture semantics explicit
203 |         }
204 |         
205 |         log.debug("粒子系统已更新: \(particleCount) 个粒子")
    |                               |- error: reference to property 'particleCount' in closure requires explicit use of 'self' to make capture semantics explicit
    |                               `- note: reference 'self.' explicitly
206 |     }
207 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:251:13: error: error is not handled because the enclosing function is not declared 'throws'
249 |         // 创建粒子计算管线
250 |         guard let particleComputeFunction = library.makeFunction(name: "particle_update_compute") else {
251 |             throw RenderingError.shaderCompilationFailed("粒子计算着色器未找到")
    |             `- error: error is not handled because the enclosing function is not declared 'throws'
252 |         }
253 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:254:35: error: errors thrown from here are not handled
252 |         }
253 |         
254 |         particleComputePipeline = try device.makeComputePipelineState(function: particleComputeFunction)
    |                                   `- error: errors thrown from here are not handled
255 |         
256 |         // 创建粒子渲染管线

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:265:34: error: errors thrown from here are not handled
263 |         particleRenderDescriptor.colorAttachments[0].destinationRGBBlendFactor = .oneMinusSourceAlpha
264 |         
265 |         particleRenderPipeline = try device.makeRenderPipelineState(descriptor: particleRenderDescriptor)
    |                                  `- error: errors thrown from here are not handled
266 |         
267 |         log.info("渲染管线设置完成")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:254:35: error: expression is 'async' but is not marked with 'await'
252 |         }
253 |         
254 |         particleComputePipeline = try device.makeComputePipelineState(function: particleComputeFunction)
    |                                   |   `- note: call is 'async'
    |                                   `- error: expression is 'async' but is not marked with 'await'
255 |         
256 |         // 创建粒子渲染管线

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:265:34: error: expression is 'async' but is not marked with 'await'
263 |         particleRenderDescriptor.colorAttachments[0].destinationRGBBlendFactor = .oneMinusSourceAlpha
264 |         
265 |         particleRenderPipeline = try device.makeRenderPipelineState(descriptor: particleRenderDescriptor)
    |                                  |   `- note: call is 'async'
    |                                  `- error: expression is 'async' but is not marked with 'await'
266 |         
267 |         log.info("渲染管线设置完成")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:297:33: error: 'any MTLAccelerationStructure' cannot be constructed because it has no accessible initializers
295 |         }
296 |         
297 |         accelerationStructure = MTLAccelerationStructure(
    |                                 `- error: 'any MTLAccelerationStructure' cannot be constructed because it has no accessible initializers
298 |             buffer: accelerationStructureBuffer,
299 |             offset: 0

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:282:30: error: expression is 'async' but is not marked with 'await'
280 |         }
281 |         
282 |         rayTracingPipeline = try device.makeComputePipelineState(function: rayTracingFunction)
    |                              |   `- note: call is 'async'
    |                              `- error: expression is 'async' but is not marked with 'await'
283 |         
284 |         // 创建加速结构（简化版本）

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:332:12: error: static member 'supportsDevice' cannot be used on instance of type 'MTLFXTemporalScalerDescriptor'
330 |         temporalScalerDescriptor.outputHeight = 2160
331 |         
332 |         if temporalScalerDescriptor.supportsDevice(device) {
    |            `- error: static member 'supportsDevice' cannot be used on instance of type 'MTLFXTemporalScalerDescriptor'
333 |             temporalScaler = temporalScalerDescriptor.makeTemporalScaler(device: device)
334 |             log.info("MetalFX时域缩放器创建成功")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:428:19: error: cannot pass immutable value as inout argument: 'uniformData' is a 'let' constant
418 |     private func updateUniforms(parameters: WeatherRenderingParameters, viewportSize: CGSize) {
419 |         // 更新基础uniform数据
420 |         let uniformData = UniformData(
    |         `- note: change 'let' to 'var' to make it mutable
421 |             viewMatrix: matrix_identity_float4x4,
422 |             projectionMatrix: createProjectionMatrix(viewportSize: viewportSize),
    :
426 |         
427 |         uniformBuffer.contents().copyMemory(
428 |             from: &uniformData,
    |                   `- error: cannot pass immutable value as inout argument: 'uniformData' is a 'let' constant
429 |             byteCount: MemoryLayout<UniformData>.stride
430 |         )

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:449:19: error: cannot pass immutable value as inout argument: 'weatherData' is a 'let' constant
431 |         
432 |         // 更新天气参数数据
433 |         let weatherData = WeatherUniformData(
    |         `- note: change 'let' to 'var' to make it mutable
434 |             weatherType: Int32(parameters.weatherType.hashValue),
435 |             intensity: Float(parameters.intensity),
    :
447 |         
448 |         weatherParametersBuffer.contents().copyMemory(
449 |             from: &weatherData,
    |                   `- error: cannot pass immutable value as inout argument: 'weatherData' is a 'let' constant
450 |             byteCount: MemoryLayout<WeatherUniformData>.stride
451 |         )

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:640:36: error: ambiguous missing whitespace between unary and binary operators
638 |             velocity: simd_float3(
639 |                 Float.random(in: -1...1),
640 |                 Float.random(in: -5...-1),
    |                                    |- error: ambiguous missing whitespace between unary and binary operators
    |                                    |- note: could be binary '...' and prefix '-'
    |                                    `- note: could be postfix '...' and binary '-'
641 |                 Float.random(in: -1...1)
642 |             ),

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/MetalFXProcessor.swift:364:40: error: expression is 'async' but is not marked with 'await'
362 |         
363 |         do {
364 |             let computePipelineState = try device.makeComputePipelineState(function: denoiseFunction)
    |                                        |   `- note: call is 'async'
    |                                        `- error: expression is 'async' but is not marked with 'await'
365 |             
366 |             guard let computeEncoder = commandBuffer.makeComputeCommandEncoder() else {
[11/34] Compiling SkyBridgeCore MetalFXProcessor.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:120:19: error: call can throw but is not marked with 'try'
118 |             
119 |             // 初始化光线追踪
120 |             await setupRayTracing()
    |                   |- error: call can throw but is not marked with 'try'
    |                   |- note: did you mean to use 'try'?
    |                   |- note: did you mean to handle error as optional value?
    |                   `- note: did you mean to disable error propagation?
121 |             
122 |             // 初始化粒子系统

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:123:19: error: call can throw but is not marked with 'try'
121 |             
122 |             // 初始化粒子系统
123 |             await setupParticleSystem()
    |                   |- error: call can throw but is not marked with 'try'
    |                   |- note: did you mean to use 'try'?
    |                   |- note: did you mean to handle error as optional value?
    |                   `- note: did you mean to disable error propagation?
124 |             
125 |             // 初始化MetalFX

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:126:19: error: call can throw but is not marked with 'try'
124 |             
125 |             // 初始化MetalFX
126 |             await setupMetalFX()
    |                   |- error: call can throw but is not marked with 'try'
    |                   |- note: did you mean to use 'try'?
    |                   |- note: did you mean to handle error as optional value?
    |                   `- note: did you mean to disable error propagation?
127 |             
128 |             // 创建渲染资源

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:205:45: error: reference to property 'particleCount' in closure requires explicit use of 'self' to make capture semantics explicit
203 |         }
204 |         
205 |         log.debug("粒子系统已更新: \(particleCount) 个粒子")
    |                               |- error: reference to property 'particleCount' in closure requires explicit use of 'self' to make capture semantics explicit
    |                               `- note: reference 'self.' explicitly
206 |     }
207 |     

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:251:13: error: error is not handled because the enclosing function is not declared 'throws'
249 |         // 创建粒子计算管线
250 |         guard let particleComputeFunction = library.makeFunction(name: "particle_update_compute") else {
251 |             throw RenderingError.shaderCompilationFailed("粒子计算着色器未找到")
    |             `- error: error is not handled because the enclosing function is not declared 'throws'
252 |         }
253 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:254:35: error: errors thrown from here are not handled
252 |         }
253 |         
254 |         particleComputePipeline = try device.makeComputePipelineState(function: particleComputeFunction)
    |                                   `- error: errors thrown from here are not handled
255 |         
256 |         // 创建粒子渲染管线

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:265:34: error: errors thrown from here are not handled
263 |         particleRenderDescriptor.colorAttachments[0].destinationRGBBlendFactor = .oneMinusSourceAlpha
264 |         
265 |         particleRenderPipeline = try device.makeRenderPipelineState(descriptor: particleRenderDescriptor)
    |                                  `- error: errors thrown from here are not handled
266 |         
267 |         log.info("渲染管线设置完成")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:254:35: error: expression is 'async' but is not marked with 'await'
252 |         }
253 |         
254 |         particleComputePipeline = try device.makeComputePipelineState(function: particleComputeFunction)
    |                                   |   `- note: call is 'async'
    |                                   `- error: expression is 'async' but is not marked with 'await'
255 |         
256 |         // 创建粒子渲染管线

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:265:34: error: expression is 'async' but is not marked with 'await'
263 |         particleRenderDescriptor.colorAttachments[0].destinationRGBBlendFactor = .oneMinusSourceAlpha
264 |         
265 |         particleRenderPipeline = try device.makeRenderPipelineState(descriptor: particleRenderDescriptor)
    |                                  |   `- note: call is 'async'
    |                                  `- error: expression is 'async' but is not marked with 'await'
266 |         
267 |         log.info("渲染管线设置完成")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:297:33: error: 'any MTLAccelerationStructure' cannot be constructed because it has no accessible initializers
295 |         }
296 |         
297 |         accelerationStructure = MTLAccelerationStructure(
    |                                 `- error: 'any MTLAccelerationStructure' cannot be constructed because it has no accessible initializers
298 |             buffer: accelerationStructureBuffer,
299 |             offset: 0

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:282:30: error: expression is 'async' but is not marked with 'await'
280 |         }
281 |         
282 |         rayTracingPipeline = try device.makeComputePipelineState(function: rayTracingFunction)
    |                              |   `- note: call is 'async'
    |                              `- error: expression is 'async' but is not marked with 'await'
283 |         
284 |         // 创建加速结构（简化版本）

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:332:12: error: static member 'supportsDevice' cannot be used on instance of type 'MTLFXTemporalScalerDescriptor'
330 |         temporalScalerDescriptor.outputHeight = 2160
331 |         
332 |         if temporalScalerDescriptor.supportsDevice(device) {
    |            `- error: static member 'supportsDevice' cannot be used on instance of type 'MTLFXTemporalScalerDescriptor'
333 |             temporalScaler = temporalScalerDescriptor.makeTemporalScaler(device: device)
334 |             log.info("MetalFX时域缩放器创建成功")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:428:19: error: cannot pass immutable value as inout argument: 'uniformData' is a 'let' constant
418 |     private func updateUniforms(parameters: WeatherRenderingParameters, viewportSize: CGSize) {
419 |         // 更新基础uniform数据
420 |         let uniformData = UniformData(
    |         `- note: change 'let' to 'var' to make it mutable
421 |             viewMatrix: matrix_identity_float4x4,
422 |             projectionMatrix: createProjectionMatrix(viewportSize: viewportSize),
    :
426 |         
427 |         uniformBuffer.contents().copyMemory(
428 |             from: &uniformData,
    |                   `- error: cannot pass immutable value as inout argument: 'uniformData' is a 'let' constant
429 |             byteCount: MemoryLayout<UniformData>.stride
430 |         )

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:449:19: error: cannot pass immutable value as inout argument: 'weatherData' is a 'let' constant
431 |         
432 |         // 更新天气参数数据
433 |         let weatherData = WeatherUniformData(
    |         `- note: change 'let' to 'var' to make it mutable
434 |             weatherType: Int32(parameters.weatherType.hashValue),
435 |             intensity: Float(parameters.intensity),
    :
447 |         
448 |         weatherParametersBuffer.contents().copyMemory(
449 |             from: &weatherData,
    |                   `- error: cannot pass immutable value as inout argument: 'weatherData' is a 'let' constant
450 |             byteCount: MemoryLayout<WeatherUniformData>.stride
451 |         )

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/Metal4RenderingEngine.swift:640:36: error: ambiguous missing whitespace between unary and binary operators
638 |             velocity: simd_float3(
639 |                 Float.random(in: -1...1),
640 |                 Float.random(in: -5...-1),
    |                                    |- error: ambiguous missing whitespace between unary and binary operators
    |                                    |- note: could be binary '...' and prefix '-'
    |                                    `- note: could be postfix '...' and binary '-'
641 |                 Float.random(in: -1...1)
642 |             ),

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/MetalFXProcessor.swift:364:40: error: expression is 'async' but is not marked with 'await'
362 |         
363 |         do {
364 |             let computePipelineState = try device.makeComputePipelineState(function: denoiseFunction)
    |                                        |   `- note: call is 'async'
    |                                        `- error: expression is 'async' but is not marked with 'await'
365 |             
366 |             guard let computeEncoder = commandBuffer.makeComputeCommandEncoder() else {
[12/34] Compiling SkyBridgeCore SettingsView.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Weather/WeatherDataService.swift:139:21: error: cannot access property 'weatherUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
137 |     deinit {
138 |         // 在 deinit 中直接停止定时器，避免捕获 self
139 |         let timer = weatherUpdateTimer
    |                     `- error: cannot access property 'weatherUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
140 |         timer?.invalidate()
141 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
[13/34] Compiling SkyBridgeCore WeatherDataService.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Weather/WeatherDataService.swift:139:21: error: cannot access property 'weatherUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
137 |     deinit {
138 |         // 在 deinit 中直接停止定时器，避免捕获 self
139 |         let timer = weatherUpdateTimer
    |                     `- error: cannot access property 'weatherUpdateTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
140 |         timer?.invalidate()
141 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
[14/34] Compiling SkyBridgeCore Models.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconFeatureDetector.swift:211:29: warning: 'init(cString:)' is deprecated: Use String(decoding: array, as: UTF8.self) instead, after truncating the null termination. [#DeprecatedDeclaration]
209 |             result = sysctlbyname("machdep.cpu.brand_string", &buffer, &size, nil, 0)
210 |             if result == 0 {
211 |                 chipModel = String(cString: buffer)
    |                             `- warning: 'init(cString:)' is deprecated: Use String(decoding: array, as: UTF8.self) instead, after truncating the null termination. [#DeprecatedDeclaration]
212 |             }
213 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconOptimizer.swift:322:19: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
310 | // MARK: - 扩展方法
311 | 
312 | extension DispatchQueue {
    | `- note: add '@available' attribute to enclosing extension
313 |     /// 创建Apple Silicon优化的队列
314 |     /// - Parameters:
    :
316 |     ///   - taskType: 任务类型
317 |     /// - Returns: 优化的队列
318 |     public static func appleSiliconOptimized(
    |                        `- note: add '@available' attribute to enclosing static method
319 |         label: String,
320 |         for taskType: TaskType
321 |     ) -> DispatchQueue {
322 |         let qos = AppleSiliconOptimizer.shared.recommendedQoS(for: taskType)
    |                   |- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
    |                   `- note: add 'if #available' version check
323 |         return AppleSiliconOptimizer.shared.createOptimizedQueue(
324 |             label: label,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconOptimizer.swift:323:16: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
310 | // MARK: - 扩展方法
311 | 
312 | extension DispatchQueue {
    | `- note: add '@available' attribute to enclosing extension
313 |     /// 创建Apple Silicon优化的队列
314 |     /// - Parameters:
    :
316 |     ///   - taskType: 任务类型
317 |     /// - Returns: 优化的队列
318 |     public static func appleSiliconOptimized(
    |                        `- note: add '@available' attribute to enclosing static method
319 |         label: String,
320 |         for taskType: TaskType
321 |     ) -> DispatchQueue {
322 |         let qos = AppleSiliconOptimizer.shared.recommendedQoS(for: taskType)
323 |         return AppleSiliconOptimizer.shared.createOptimizedQueue(
    |                |- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
    |                `- note: add 'if #available' version check
324 |             label: label,
325 |             qos: qos

[#DeprecatedDeclaration]: <https://docs.swift.org/compiler/documentation/diagnostics/deprecated-declaration>
[15/34] Compiling SkyBridgeCore AppleSiliconFeatureDetector.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconFeatureDetector.swift:211:29: warning: 'init(cString:)' is deprecated: Use String(decoding: array, as: UTF8.self) instead, after truncating the null termination. [#DeprecatedDeclaration]
209 |             result = sysctlbyname("machdep.cpu.brand_string", &buffer, &size, nil, 0)
210 |             if result == 0 {
211 |                 chipModel = String(cString: buffer)
    |                             `- warning: 'init(cString:)' is deprecated: Use String(decoding: array, as: UTF8.self) instead, after truncating the null termination. [#DeprecatedDeclaration]
212 |             }
213 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconOptimizer.swift:322:19: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
310 | // MARK: - 扩展方法
311 | 
312 | extension DispatchQueue {
    | `- note: add '@available' attribute to enclosing extension
313 |     /// 创建Apple Silicon优化的队列
314 |     /// - Parameters:
    :
316 |     ///   - taskType: 任务类型
317 |     /// - Returns: 优化的队列
318 |     public static func appleSiliconOptimized(
    |                        `- note: add '@available' attribute to enclosing static method
319 |         label: String,
320 |         for taskType: TaskType
321 |     ) -> DispatchQueue {
322 |         let qos = AppleSiliconOptimizer.shared.recommendedQoS(for: taskType)
    |                   |- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
    |                   `- note: add 'if #available' version check
323 |         return AppleSiliconOptimizer.shared.createOptimizedQueue(
324 |             label: label,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconOptimizer.swift:323:16: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
310 | // MARK: - 扩展方法
311 | 
312 | extension DispatchQueue {
    | `- note: add '@available' attribute to enclosing extension
313 |     /// 创建Apple Silicon优化的队列
314 |     /// - Parameters:
    :
316 |     ///   - taskType: 任务类型
317 |     /// - Returns: 优化的队列
318 |     public static func appleSiliconOptimized(
    |                        `- note: add '@available' attribute to enclosing static method
319 |         label: String,
320 |         for taskType: TaskType
321 |     ) -> DispatchQueue {
322 |         let qos = AppleSiliconOptimizer.shared.recommendedQoS(for: taskType)
323 |         return AppleSiliconOptimizer.shared.createOptimizedQueue(
    |                |- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
    |                `- note: add 'if #available' version check
324 |             label: label,
325 |             qos: qos

[#DeprecatedDeclaration]: <https://docs.swift.org/compiler/documentation/diagnostics/deprecated-declaration>
[16/34] Compiling SkyBridgeCore AppleSiliconOptimizer.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconFeatureDetector.swift:211:29: warning: 'init(cString:)' is deprecated: Use String(decoding: array, as: UTF8.self) instead, after truncating the null termination. [#DeprecatedDeclaration]
209 |             result = sysctlbyname("machdep.cpu.brand_string", &buffer, &size, nil, 0)
210 |             if result == 0 {
211 |                 chipModel = String(cString: buffer)
    |                             `- warning: 'init(cString:)' is deprecated: Use String(decoding: array, as: UTF8.self) instead, after truncating the null termination. [#DeprecatedDeclaration]
212 |             }
213 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconOptimizer.swift:322:19: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
310 | // MARK: - 扩展方法
311 | 
312 | extension DispatchQueue {
    | `- note: add '@available' attribute to enclosing extension
313 |     /// 创建Apple Silicon优化的队列
314 |     /// - Parameters:
    :
316 |     ///   - taskType: 任务类型
317 |     /// - Returns: 优化的队列
318 |     public static func appleSiliconOptimized(
    |                        `- note: add '@available' attribute to enclosing static method
319 |         label: String,
320 |         for taskType: TaskType
321 |     ) -> DispatchQueue {
322 |         let qos = AppleSiliconOptimizer.shared.recommendedQoS(for: taskType)
    |                   |- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
    |                   `- note: add 'if #available' version check
323 |         return AppleSiliconOptimizer.shared.createOptimizedQueue(
324 |             label: label,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/AppleSiliconOptimizer.swift:323:16: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
310 | // MARK: - 扩展方法
311 | 
312 | extension DispatchQueue {
    | `- note: add '@available' attribute to enclosing extension
313 |     /// 创建Apple Silicon优化的队列
314 |     /// - Parameters:
    :
316 |     ///   - taskType: 任务类型
317 |     /// - Returns: 优化的队列
318 |     public static func appleSiliconOptimized(
    |                        `- note: add '@available' attribute to enclosing static method
319 |         label: String,
320 |         for taskType: TaskType
321 |     ) -> DispatchQueue {
322 |         let qos = AppleSiliconOptimizer.shared.recommendedQoS(for: taskType)
323 |         return AppleSiliconOptimizer.shared.createOptimizedQueue(
    |                |- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
    |                `- note: add 'if #available' version check
324 |             label: label,
325 |             qos: qos

[#DeprecatedDeclaration]: <https://docs.swift.org/compiler/documentation/diagnostics/deprecated-declaration>
[17/34] Compiling SkyBridgeCore PerformanceCoordinator.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:482:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
480 |         gpuUsage: Float = 0.0,
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
483 |         powerState: PowerManager.PowerState = .normal,
484 |         batteryLevel: Double = 1.0,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:483:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
483 |         powerState: PowerManager.PowerState = .normal,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
484 |         batteryLevel: Double = 1.0,
485 |         timestamp: Date = Date()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:23:40: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
  8 | /// 性能协调器 - 统一管理所有性能优化组件
  9 | @MainActor
 10 | public class PerformanceCoordinator: ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 11 |     
 12 |     // MARK: - 发布属性
    :
 21 |     private let thermalManager: ThermalManager
 22 |     private let powerManager: PowerManager
 23 |     private let appleSiliconOptimizer: AppleSiliconOptimizer?
    |                                        `- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
 24 |     private let metalPerformanceOptimizer: MetalPerformanceOptimizer
 25 |     private let metalFXProcessor: MetalFXProcessor?

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:259:74: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
257 |     
258 |     /// 处理热量状态变化
259 |     private func handleThermalStateChange(_ thermalState: ThermalManager.ThermalState) async {
    |                                                                          `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
260 |         logger.info("🌡️ 热量状态变化处理: \(thermalState.rawValue)")
261 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:265:68: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
263 |     
264 |     /// 处理电源状态变化
265 |     private func handlePowerStateChange(_ powerState: PowerManager.PowerState) async {
    |                                                                    `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
266 |         logger.info("🔋 电源状态变化处理: \(powerState.rawValue)")
267 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:280:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
278 |     /// 更新性能指标
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
281 |         powerState: PowerManager.PowerState,
282 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:281:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
281 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
282 |         batteryLevel: Double,
283 |         metalStats: PerformanceStats

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:300:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
298 |     /// 计算整体性能状态
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
301 |         powerState: PowerManager.PowerState,
302 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:301:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
301 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
302 |         batteryLevel: Double,
303 |         frameRate: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:471:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
469 |     public let gpuUsage: Float
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
472 |     public let powerState: PowerManager.PowerState
473 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:472:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
472 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
473 |     public let batteryLevel: Double
474 |     public let timestamp: Date

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:501:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
499 | /// 详细性能报告
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
502 |     public let powerState: PowerManager.PowerState
503 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:502:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
502 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
503 |     public let batteryLevel: Double
504 |     public let cpuTemperature: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:516:64: error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
514 | public struct PerformanceProfile {
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    |                                                                `- error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
518 |     public let targetFrameRate: Int

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:8:14: note: 'MetalPerformanceOptimizer' declared here
  6 | /// Metal性能优化器 - 专门针对Metal渲染管线的性能优化
  7 | @MainActor
  8 | public class MetalPerformanceOptimizer {
    |              `- note: 'MetalPerformanceOptimizer' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:517:49: error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
    |                                                 `- error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
518 |     public let targetFrameRate: Int
519 |     public let optimizations: [OptimizationType]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/MetalFXProcessor.swift:8:14: note: 'MetalFXProcessor' declared here
  6 | /// MetalFX处理器 - 实现画质增强和性能优化
  7 | @MainActor
  8 | public class MetalFXProcessor {
    |              `- note: 'MetalFXProcessor' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:522:23: error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
512 | 
513 | /// 性能配置文件
514 | public struct PerformanceProfile {
    |               `- note: consider making struct 'PerformanceProfile' conform to the 'Sendable' protocol
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    :
520 |     
521 |     /// 预定义的性能配置
522 |     public static let profiles: [PerformanceProfile] = [
    |                       |- error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'profiles' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
523 |         PerformanceProfile(
524 |             name: "最高质量",

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:525:36: error: cannot infer contextual base in reference to member 'highPerformance'
523 |         PerformanceProfile(
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
    |                                    `- error: cannot infer contextual base in reference to member 'highPerformance'
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:526:30: error: cannot infer contextual base in reference to member 'quality'
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
526 |             metalFXQuality: .quality,
    |                              `- error: cannot infer contextual base in reference to member 'quality'
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:49: error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                                                 `- error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:532:36: error: cannot infer contextual base in reference to member 'balanced'
530 |         PerformanceProfile(
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
    |                                    `- error: cannot infer contextual base in reference to member 'balanced'
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:533:30: error: cannot infer contextual base in reference to member 'balanced'
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
533 |             metalFXQuality: .balanced,
    |                              `- error: cannot infer contextual base in reference to member 'balanced'
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:49: error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                                                 `- error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:539:36: error: cannot infer contextual base in reference to member 'powerEfficient'
537 |         PerformanceProfile(
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
    |                                    `- error: cannot infer contextual base in reference to member 'powerEfficient'
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:540:30: error: cannot infer contextual base in reference to member 'performance'
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
540 |             metalFXQuality: .performance,
    |                              `- error: cannot infer contextual base in reference to member 'performance'
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:30: error: reference to member 'powerSaving' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                              `- error: reference to member 'powerSaving' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:44: error: reference to member 'reducedQuality' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                                            `- error: reference to member 'reducedQuality' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:288:34: error: value of type 'PerformanceStats' has no member 'cpuUsage'
286 |             frameRate: 1000.0 / metalStats.averageFrameTime,
287 |             frameTime: metalStats.averageFrameTime,
288 |             cpuUsage: metalStats.cpuUsage,
    |                                  `- error: value of type 'PerformanceStats' has no member 'cpuUsage'
289 |             gpuUsage: metalStats.gpuUsage,
290 |             memoryUsage: metalStats.memoryUsage,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:289:34: error: value of type 'PerformanceStats' has no member 'gpuUsage'
287 |             frameTime: metalStats.averageFrameTime,
288 |             cpuUsage: metalStats.cpuUsage,
289 |             gpuUsage: metalStats.gpuUsage,
    |                                  `- error: value of type 'PerformanceStats' has no member 'gpuUsage'
290 |             memoryUsage: metalStats.memoryUsage,
291 |             thermalState: thermalState,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:290:37: error: value of type 'PerformanceStats' has no member 'memoryUsage'
288 |             cpuUsage: metalStats.cpuUsage,
289 |             gpuUsage: metalStats.gpuUsage,
290 |             memoryUsage: metalStats.memoryUsage,
    |                                     `- error: value of type 'PerformanceStats' has no member 'memoryUsage'
291 |             thermalState: thermalState,
292 |             powerState: powerState,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:367:65: error: type 'Bool' has no member 'highPerformance'
365 |         case .optimal:
366 |             // 最佳状态，启用所有增强功能
367 |             await metalPerformanceOptimizer.setPerformanceMode(.highPerformance)
    |                                                                 `- error: type 'Bool' has no member 'highPerformance'
368 |             if let metalFX = metalFXProcessor {
369 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:379:65: error: type 'Bool' has no member 'balanced'
377 |         case .good:
378 |             // 良好状态，平衡性能和质量
379 |             await metalPerformanceOptimizer.setPerformanceMode(.balanced)
    |                                                                 `- error: type 'Bool' has no member 'balanced'
380 |             if let metalFX = metalFXProcessor {
381 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:391:65: error: type 'Bool' has no member 'powerEfficient'
389 |         case .degraded:
390 |             // 性能下降，优先保证流畅度
391 |             await metalPerformanceOptimizer.setPerformanceMode(.powerEfficient)
    |                                                                 `- error: type 'Bool' has no member 'powerEfficient'
392 |             if let metalFX = metalFXProcessor {
393 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:403:65: error: type 'Bool' has no member 'powerEfficient'
401 |         case .critical:
402 |             // 危险状态，最大程度优化
403 |             await metalPerformanceOptimizer.setPerformanceMode(.powerEfficient)
    |                                                                 `- error: type 'Bool' has no member 'powerEfficient'
404 |             metalPerformanceOptimizer.setTargetFrameRate(30)
405 |             optimizations = [.aggressiveThermalThrottling, .emergencyPowerSaving, .minimumQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:370:25: warning: no 'async' operations occur within 'await' expression
368 |             if let metalFX = metalFXProcessor {
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
    |                         `- warning: no 'async' operations occur within 'await' expression
371 |                 } catch {
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:370:21: warning: no calls to throwing functions occur within 'try' expression
368 |             if let metalFX = metalFXProcessor {
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
371 |                 } catch {
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:371:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
371 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")
373 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:382:25: warning: no 'async' operations occur within 'await' expression
380 |             if let metalFX = metalFXProcessor {
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
    |                         `- warning: no 'async' operations occur within 'await' expression
383 |                 } catch {
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:382:21: warning: no calls to throwing functions occur within 'try' expression
380 |             if let metalFX = metalFXProcessor {
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
383 |                 } catch {
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:383:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
383 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")
385 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:394:25: warning: no 'async' operations occur within 'await' expression
392 |             if let metalFX = metalFXProcessor {
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
    |                         `- warning: no 'async' operations occur within 'await' expression
395 |                 } catch {
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:394:21: warning: no calls to throwing functions occur within 'try' expression
392 |             if let metalFX = metalFXProcessor {
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
395 |                 } catch {
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:395:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
395 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")
397 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceTestSuite.swift:180:13: warning: initialization of immutable value 'allocator' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
178 |         // 测试大块内存分配和操作
179 |         let largeDataSize = 1_000_000
180 |         let allocator = memoryOptimizer.getOptimizedAllocator(for: Double.self, count: largeDataSize)
    |             `- warning: initialization of immutable value 'allocator' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
181 |         
182 |         // 执行内存密集型操作

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceTestSuite.swift:401:13: warning: variable 'meanArray' was never mutated; consider changing to 'let' constant
399 |         
400 |         // 计算方差
401 |         var meanArray = [Double](repeating: mean, count: dataSize)
    |             `- warning: variable 'meanArray' was never mutated; consider changing to 'let' constant
402 |         var diffArray = [Double](repeating: 0, count: dataSize)
403 |         var squaredDiffArray = [Double](repeating: 0, count: dataSize)

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
[18/34] Compiling SkyBridgeCore PerformanceTestSuite.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:482:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
480 |         gpuUsage: Float = 0.0,
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
483 |         powerState: PowerManager.PowerState = .normal,
484 |         batteryLevel: Double = 1.0,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:483:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
483 |         powerState: PowerManager.PowerState = .normal,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
484 |         batteryLevel: Double = 1.0,
485 |         timestamp: Date = Date()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:23:40: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
  8 | /// 性能协调器 - 统一管理所有性能优化组件
  9 | @MainActor
 10 | public class PerformanceCoordinator: ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 11 |     
 12 |     // MARK: - 发布属性
    :
 21 |     private let thermalManager: ThermalManager
 22 |     private let powerManager: PowerManager
 23 |     private let appleSiliconOptimizer: AppleSiliconOptimizer?
    |                                        `- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
 24 |     private let metalPerformanceOptimizer: MetalPerformanceOptimizer
 25 |     private let metalFXProcessor: MetalFXProcessor?

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:259:74: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
257 |     
258 |     /// 处理热量状态变化
259 |     private func handleThermalStateChange(_ thermalState: ThermalManager.ThermalState) async {
    |                                                                          `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
260 |         logger.info("🌡️ 热量状态变化处理: \(thermalState.rawValue)")
261 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:265:68: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
263 |     
264 |     /// 处理电源状态变化
265 |     private func handlePowerStateChange(_ powerState: PowerManager.PowerState) async {
    |                                                                    `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
266 |         logger.info("🔋 电源状态变化处理: \(powerState.rawValue)")
267 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:280:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
278 |     /// 更新性能指标
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
281 |         powerState: PowerManager.PowerState,
282 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:281:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
281 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
282 |         batteryLevel: Double,
283 |         metalStats: PerformanceStats

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:300:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
298 |     /// 计算整体性能状态
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
301 |         powerState: PowerManager.PowerState,
302 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:301:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
301 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
302 |         batteryLevel: Double,
303 |         frameRate: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:471:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
469 |     public let gpuUsage: Float
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
472 |     public let powerState: PowerManager.PowerState
473 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:472:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
472 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
473 |     public let batteryLevel: Double
474 |     public let timestamp: Date

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:501:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
499 | /// 详细性能报告
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
502 |     public let powerState: PowerManager.PowerState
503 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:502:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
502 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
503 |     public let batteryLevel: Double
504 |     public let cpuTemperature: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:516:64: error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
514 | public struct PerformanceProfile {
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    |                                                                `- error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
518 |     public let targetFrameRate: Int

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:8:14: note: 'MetalPerformanceOptimizer' declared here
  6 | /// Metal性能优化器 - 专门针对Metal渲染管线的性能优化
  7 | @MainActor
  8 | public class MetalPerformanceOptimizer {
    |              `- note: 'MetalPerformanceOptimizer' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:517:49: error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
    |                                                 `- error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
518 |     public let targetFrameRate: Int
519 |     public let optimizations: [OptimizationType]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/MetalFXProcessor.swift:8:14: note: 'MetalFXProcessor' declared here
  6 | /// MetalFX处理器 - 实现画质增强和性能优化
  7 | @MainActor
  8 | public class MetalFXProcessor {
    |              `- note: 'MetalFXProcessor' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:522:23: error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
512 | 
513 | /// 性能配置文件
514 | public struct PerformanceProfile {
    |               `- note: consider making struct 'PerformanceProfile' conform to the 'Sendable' protocol
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    :
520 |     
521 |     /// 预定义的性能配置
522 |     public static let profiles: [PerformanceProfile] = [
    |                       |- error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'profiles' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
523 |         PerformanceProfile(
524 |             name: "最高质量",

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:525:36: error: cannot infer contextual base in reference to member 'highPerformance'
523 |         PerformanceProfile(
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
    |                                    `- error: cannot infer contextual base in reference to member 'highPerformance'
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:526:30: error: cannot infer contextual base in reference to member 'quality'
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
526 |             metalFXQuality: .quality,
    |                              `- error: cannot infer contextual base in reference to member 'quality'
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:49: error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                                                 `- error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:532:36: error: cannot infer contextual base in reference to member 'balanced'
530 |         PerformanceProfile(
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
    |                                    `- error: cannot infer contextual base in reference to member 'balanced'
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:533:30: error: cannot infer contextual base in reference to member 'balanced'
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
533 |             metalFXQuality: .balanced,
    |                              `- error: cannot infer contextual base in reference to member 'balanced'
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:49: error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                                                 `- error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:539:36: error: cannot infer contextual base in reference to member 'powerEfficient'
537 |         PerformanceProfile(
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
    |                                    `- error: cannot infer contextual base in reference to member 'powerEfficient'
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:540:30: error: cannot infer contextual base in reference to member 'performance'
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
540 |             metalFXQuality: .performance,
    |                              `- error: cannot infer contextual base in reference to member 'performance'
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:30: error: reference to member 'powerSaving' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                              `- error: reference to member 'powerSaving' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:44: error: reference to member 'reducedQuality' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                                            `- error: reference to member 'reducedQuality' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:288:34: error: value of type 'PerformanceStats' has no member 'cpuUsage'
286 |             frameRate: 1000.0 / metalStats.averageFrameTime,
287 |             frameTime: metalStats.averageFrameTime,
288 |             cpuUsage: metalStats.cpuUsage,
    |                                  `- error: value of type 'PerformanceStats' has no member 'cpuUsage'
289 |             gpuUsage: metalStats.gpuUsage,
290 |             memoryUsage: metalStats.memoryUsage,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:289:34: error: value of type 'PerformanceStats' has no member 'gpuUsage'
287 |             frameTime: metalStats.averageFrameTime,
288 |             cpuUsage: metalStats.cpuUsage,
289 |             gpuUsage: metalStats.gpuUsage,
    |                                  `- error: value of type 'PerformanceStats' has no member 'gpuUsage'
290 |             memoryUsage: metalStats.memoryUsage,
291 |             thermalState: thermalState,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:290:37: error: value of type 'PerformanceStats' has no member 'memoryUsage'
288 |             cpuUsage: metalStats.cpuUsage,
289 |             gpuUsage: metalStats.gpuUsage,
290 |             memoryUsage: metalStats.memoryUsage,
    |                                     `- error: value of type 'PerformanceStats' has no member 'memoryUsage'
291 |             thermalState: thermalState,
292 |             powerState: powerState,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:367:65: error: type 'Bool' has no member 'highPerformance'
365 |         case .optimal:
366 |             // 最佳状态，启用所有增强功能
367 |             await metalPerformanceOptimizer.setPerformanceMode(.highPerformance)
    |                                                                 `- error: type 'Bool' has no member 'highPerformance'
368 |             if let metalFX = metalFXProcessor {
369 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:379:65: error: type 'Bool' has no member 'balanced'
377 |         case .good:
378 |             // 良好状态，平衡性能和质量
379 |             await metalPerformanceOptimizer.setPerformanceMode(.balanced)
    |                                                                 `- error: type 'Bool' has no member 'balanced'
380 |             if let metalFX = metalFXProcessor {
381 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:391:65: error: type 'Bool' has no member 'powerEfficient'
389 |         case .degraded:
390 |             // 性能下降，优先保证流畅度
391 |             await metalPerformanceOptimizer.setPerformanceMode(.powerEfficient)
    |                                                                 `- error: type 'Bool' has no member 'powerEfficient'
392 |             if let metalFX = metalFXProcessor {
393 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:403:65: error: type 'Bool' has no member 'powerEfficient'
401 |         case .critical:
402 |             // 危险状态，最大程度优化
403 |             await metalPerformanceOptimizer.setPerformanceMode(.powerEfficient)
    |                                                                 `- error: type 'Bool' has no member 'powerEfficient'
404 |             metalPerformanceOptimizer.setTargetFrameRate(30)
405 |             optimizations = [.aggressiveThermalThrottling, .emergencyPowerSaving, .minimumQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:370:25: warning: no 'async' operations occur within 'await' expression
368 |             if let metalFX = metalFXProcessor {
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
    |                         `- warning: no 'async' operations occur within 'await' expression
371 |                 } catch {
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:370:21: warning: no calls to throwing functions occur within 'try' expression
368 |             if let metalFX = metalFXProcessor {
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
371 |                 } catch {
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:371:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
371 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")
373 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:382:25: warning: no 'async' operations occur within 'await' expression
380 |             if let metalFX = metalFXProcessor {
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
    |                         `- warning: no 'async' operations occur within 'await' expression
383 |                 } catch {
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:382:21: warning: no calls to throwing functions occur within 'try' expression
380 |             if let metalFX = metalFXProcessor {
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
383 |                 } catch {
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:383:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
383 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")
385 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:394:25: warning: no 'async' operations occur within 'await' expression
392 |             if let metalFX = metalFXProcessor {
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
    |                         `- warning: no 'async' operations occur within 'await' expression
395 |                 } catch {
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:394:21: warning: no calls to throwing functions occur within 'try' expression
392 |             if let metalFX = metalFXProcessor {
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
395 |                 } catch {
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:395:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
395 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")
397 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceTestSuite.swift:180:13: warning: initialization of immutable value 'allocator' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
178 |         // 测试大块内存分配和操作
179 |         let largeDataSize = 1_000_000
180 |         let allocator = memoryOptimizer.getOptimizedAllocator(for: Double.self, count: largeDataSize)
    |             `- warning: initialization of immutable value 'allocator' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
181 |         
182 |         // 执行内存密集型操作

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceTestSuite.swift:401:13: warning: variable 'meanArray' was never mutated; consider changing to 'let' constant
399 |         
400 |         // 计算方差
401 |         var meanArray = [Double](repeating: mean, count: dataSize)
    |             `- warning: variable 'meanArray' was never mutated; consider changing to 'let' constant
402 |         var diffArray = [Double](repeating: 0, count: dataSize)
403 |         var squaredDiffArray = [Double](repeating: 0, count: dataSize)

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
[19/34] Compiling SkyBridgeCore PerformanceTestView.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:482:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
480 |         gpuUsage: Float = 0.0,
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
483 |         powerState: PowerManager.PowerState = .normal,
484 |         batteryLevel: Double = 1.0,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:483:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
481 |         memoryUsage: Float = 0.0,
482 |         thermalState: ThermalManager.ThermalState = .nominal,
483 |         powerState: PowerManager.PowerState = .normal,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
484 |         batteryLevel: Double = 1.0,
485 |         timestamp: Date = Date()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:23:40: error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
  8 | /// 性能协调器 - 统一管理所有性能优化组件
  9 | @MainActor
 10 | public class PerformanceCoordinator: ObservableObject {
    |              `- note: add '@available' attribute to enclosing class
 11 |     
 12 |     // MARK: - 发布属性
    :
 21 |     private let thermalManager: ThermalManager
 22 |     private let powerManager: PowerManager
 23 |     private let appleSiliconOptimizer: AppleSiliconOptimizer?
    |                                        `- error: 'AppleSiliconOptimizer' is only available in macOS 14.0 or newer
 24 |     private let metalPerformanceOptimizer: MetalPerformanceOptimizer
 25 |     private let metalFXProcessor: MetalFXProcessor?

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:259:74: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
257 |     
258 |     /// 处理热量状态变化
259 |     private func handleThermalStateChange(_ thermalState: ThermalManager.ThermalState) async {
    |                                                                          `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
260 |         logger.info("🌡️ 热量状态变化处理: \(thermalState.rawValue)")
261 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:265:68: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
263 |     
264 |     /// 处理电源状态变化
265 |     private func handlePowerStateChange(_ powerState: PowerManager.PowerState) async {
    |                                                                    `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
266 |         logger.info("🔋 电源状态变化处理: \(powerState.rawValue)")
267 |         await coordinatePerformance()

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:280:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
278 |     /// 更新性能指标
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
281 |         powerState: PowerManager.PowerState,
282 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:281:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
279 |     private func updatePerformanceMetrics(
280 |         thermalState: ThermalManager.ThermalState,
281 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
282 |         batteryLevel: Double,
283 |         metalStats: PerformanceStats

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:300:38: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
298 |     /// 计算整体性能状态
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
    |                                      `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
301 |         powerState: PowerManager.PowerState,
302 |         batteryLevel: Double,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:301:34: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
299 |     private func calculateOverallPerformanceState(
300 |         thermalState: ThermalManager.ThermalState,
301 |         powerState: PowerManager.PowerState,
    |                                  `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
302 |         batteryLevel: Double,
303 |         frameRate: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:471:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
469 |     public let gpuUsage: Float
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
472 |     public let powerState: PowerManager.PowerState
473 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:472:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
470 |     public let memoryUsage: Float
471 |     public let thermalState: ThermalManager.ThermalState
472 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
473 |     public let batteryLevel: Double
474 |     public let timestamp: Date

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:501:45: error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
499 | /// 详细性能报告
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
    |                                             `- error: 'ThermalState' is not a member type of class 'SkyBridgeCore.ThermalManager'
502 |     public let powerState: PowerManager.PowerState
503 |     public let batteryLevel: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:7:14: note: 'ThermalManager' declared here
  5 | /// 热量管理器 - 监控系统温度并进行热量调节
  6 | @MainActor
  7 | public class ThermalManager: ObservableObject {
    |              `- note: 'ThermalManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:502:41: error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
500 | public struct DetailedPerformanceReport {
501 |     public let thermalState: ThermalManager.ThermalState
502 |     public let powerState: PowerManager.PowerState
    |                                         `- error: 'PowerState' is not a member type of class 'SkyBridgeCore.PowerManager'
503 |     public let batteryLevel: Double
504 |     public let cpuTemperature: Double

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:7:14: note: 'PowerManager' declared here
  5 | /// 电源管理器 - 监控电池状态和功耗优化
  6 | @MainActor
  7 | public class PowerManager: ObservableObject {
    |              `- note: 'PowerManager' declared here
  8 |     
  9 |     // MARK: - 发布属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:516:64: error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
514 | public struct PerformanceProfile {
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    |                                                                `- error: 'PerformanceMode' is not a member type of class 'SkyBridgeCore.MetalPerformanceOptimizer'
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
518 |     public let targetFrameRate: Int

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:8:14: note: 'MetalPerformanceOptimizer' declared here
  6 | /// Metal性能优化器 - 专门针对Metal渲染管线的性能优化
  7 | @MainActor
  8 | public class MetalPerformanceOptimizer {
    |              `- note: 'MetalPerformanceOptimizer' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:517:49: error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
517 |     public let metalFXQuality: MetalFXProcessor.QualityMode
    |                                                 `- error: 'QualityMode' is not a member type of class 'SkyBridgeCore.MetalFXProcessor'
518 |     public let targetFrameRate: Int
519 |     public let optimizations: [OptimizationType]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Rendering/MetalFXProcessor.swift:8:14: note: 'MetalFXProcessor' declared here
  6 | /// MetalFX处理器 - 实现画质增强和性能优化
  7 | @MainActor
  8 | public class MetalFXProcessor {
    |              `- note: 'MetalFXProcessor' declared here
  9 |     
 10 |     // MARK: - 私有属性

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:522:23: error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
512 | 
513 | /// 性能配置文件
514 | public struct PerformanceProfile {
    |               `- note: consider making struct 'PerformanceProfile' conform to the 'Sendable' protocol
515 |     public let name: String
516 |     public let metalPerformanceMode: MetalPerformanceOptimizer.PerformanceMode
    :
520 |     
521 |     /// 预定义的性能配置
522 |     public static let profiles: [PerformanceProfile] = [
    |                       |- error: static property 'profiles' is not concurrency-safe because non-'Sendable' type '[PerformanceProfile]' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'profiles' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
523 |         PerformanceProfile(
524 |             name: "最高质量",

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:525:36: error: cannot infer contextual base in reference to member 'highPerformance'
523 |         PerformanceProfile(
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
    |                                    `- error: cannot infer contextual base in reference to member 'highPerformance'
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:526:30: error: cannot infer contextual base in reference to member 'quality'
524 |             name: "最高质量",
525 |             metalPerformanceMode: .highPerformance,
526 |             metalFXQuality: .quality,
    |                              `- error: cannot infer contextual base in reference to member 'quality'
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:528:49: error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
526 |             metalFXQuality: .quality,
527 |             targetFrameRate: 60,
528 |             optimizations: [.metalFXUpscaling, .highQualityRendering]
    |                                                 `- error: reference to member 'highQualityRendering' cannot be resolved without a contextual type
529 |         ),
530 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:532:36: error: cannot infer contextual base in reference to member 'balanced'
530 |         PerformanceProfile(
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
    |                                    `- error: cannot infer contextual base in reference to member 'balanced'
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:533:30: error: cannot infer contextual base in reference to member 'balanced'
531 |             name: "平衡模式",
532 |             metalPerformanceMode: .balanced,
533 |             metalFXQuality: .balanced,
    |                              `- error: cannot infer contextual base in reference to member 'balanced'
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:30: error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                              `- error: reference to member 'metalFXUpscaling' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:535:49: error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
533 |             metalFXQuality: .balanced,
534 |             targetFrameRate: 60,
535 |             optimizations: [.metalFXUpscaling, .adaptiveQuality]
    |                                                 `- error: reference to member 'adaptiveQuality' cannot be resolved without a contextual type
536 |         ),
537 |         PerformanceProfile(

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:539:36: error: cannot infer contextual base in reference to member 'powerEfficient'
537 |         PerformanceProfile(
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
    |                                    `- error: cannot infer contextual base in reference to member 'powerEfficient'
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:540:30: error: cannot infer contextual base in reference to member 'performance'
538 |             name: "省电模式",
539 |             metalPerformanceMode: .powerEfficient,
540 |             metalFXQuality: .performance,
    |                              `- error: cannot infer contextual base in reference to member 'performance'
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:30: error: reference to member 'powerSaving' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                              `- error: reference to member 'powerSaving' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:542:44: error: reference to member 'reducedQuality' cannot be resolved without a contextual type
540 |             metalFXQuality: .performance,
541 |             targetFrameRate: 30,
542 |             optimizations: [.powerSaving, .reducedQuality]
    |                                            `- error: reference to member 'reducedQuality' cannot be resolved without a contextual type
543 |         )
544 |     ]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:288:34: error: value of type 'PerformanceStats' has no member 'cpuUsage'
286 |             frameRate: 1000.0 / metalStats.averageFrameTime,
287 |             frameTime: metalStats.averageFrameTime,
288 |             cpuUsage: metalStats.cpuUsage,
    |                                  `- error: value of type 'PerformanceStats' has no member 'cpuUsage'
289 |             gpuUsage: metalStats.gpuUsage,
290 |             memoryUsage: metalStats.memoryUsage,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:289:34: error: value of type 'PerformanceStats' has no member 'gpuUsage'
287 |             frameTime: metalStats.averageFrameTime,
288 |             cpuUsage: metalStats.cpuUsage,
289 |             gpuUsage: metalStats.gpuUsage,
    |                                  `- error: value of type 'PerformanceStats' has no member 'gpuUsage'
290 |             memoryUsage: metalStats.memoryUsage,
291 |             thermalState: thermalState,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:290:37: error: value of type 'PerformanceStats' has no member 'memoryUsage'
288 |             cpuUsage: metalStats.cpuUsage,
289 |             gpuUsage: metalStats.gpuUsage,
290 |             memoryUsage: metalStats.memoryUsage,
    |                                     `- error: value of type 'PerformanceStats' has no member 'memoryUsage'
291 |             thermalState: thermalState,
292 |             powerState: powerState,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:367:65: error: type 'Bool' has no member 'highPerformance'
365 |         case .optimal:
366 |             // 最佳状态，启用所有增强功能
367 |             await metalPerformanceOptimizer.setPerformanceMode(.highPerformance)
    |                                                                 `- error: type 'Bool' has no member 'highPerformance'
368 |             if let metalFX = metalFXProcessor {
369 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:379:65: error: type 'Bool' has no member 'balanced'
377 |         case .good:
378 |             // 良好状态，平衡性能和质量
379 |             await metalPerformanceOptimizer.setPerformanceMode(.balanced)
    |                                                                 `- error: type 'Bool' has no member 'balanced'
380 |             if let metalFX = metalFXProcessor {
381 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:391:65: error: type 'Bool' has no member 'powerEfficient'
389 |         case .degraded:
390 |             // 性能下降，优先保证流畅度
391 |             await metalPerformanceOptimizer.setPerformanceMode(.powerEfficient)
    |                                                                 `- error: type 'Bool' has no member 'powerEfficient'
392 |             if let metalFX = metalFXProcessor {
393 |                 do {

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:403:65: error: type 'Bool' has no member 'powerEfficient'
401 |         case .critical:
402 |             // 危险状态，最大程度优化
403 |             await metalPerformanceOptimizer.setPerformanceMode(.powerEfficient)
    |                                                                 `- error: type 'Bool' has no member 'powerEfficient'
404 |             metalPerformanceOptimizer.setTargetFrameRate(30)
405 |             optimizations = [.aggressiveThermalThrottling, .emergencyPowerSaving, .minimumQuality]

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:370:25: warning: no 'async' operations occur within 'await' expression
368 |             if let metalFX = metalFXProcessor {
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
    |                         `- warning: no 'async' operations occur within 'await' expression
371 |                 } catch {
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:370:21: warning: no calls to throwing functions occur within 'try' expression
368 |             if let metalFX = metalFXProcessor {
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
371 |                 } catch {
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:371:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
369 |                 do {
370 |                     try await metalFX.setQualityMode(.quality)
371 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
372 |                     logger.error("❌ MetalFX质量模式设置失败: \(error.localizedDescription)")
373 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:382:25: warning: no 'async' operations occur within 'await' expression
380 |             if let metalFX = metalFXProcessor {
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
    |                         `- warning: no 'async' operations occur within 'await' expression
383 |                 } catch {
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:382:21: warning: no calls to throwing functions occur within 'try' expression
380 |             if let metalFX = metalFXProcessor {
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
383 |                 } catch {
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:383:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
381 |                 do {
382 |                     try await metalFX.setQualityMode(.balanced)
383 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
384 |                     logger.error("❌ MetalFX平衡模式设置失败: \(error.localizedDescription)")
385 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:394:25: warning: no 'async' operations occur within 'await' expression
392 |             if let metalFX = metalFXProcessor {
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
    |                         `- warning: no 'async' operations occur within 'await' expression
395 |                 } catch {
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:394:21: warning: no calls to throwing functions occur within 'try' expression
392 |             if let metalFX = metalFXProcessor {
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
    |                     `- warning: no calls to throwing functions occur within 'try' expression
395 |                 } catch {
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceCoordinator.swift:395:19: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
393 |                 do {
394 |                     try await metalFX.setQualityMode(.performance)
395 |                 } catch {
    |                   `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
396 |                     logger.error("❌ MetalFX性能模式设置失败: \(error.localizedDescription)")
397 |                 }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceTestSuite.swift:180:13: warning: initialization of immutable value 'allocator' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
178 |         // 测试大块内存分配和操作
179 |         let largeDataSize = 1_000_000
180 |         let allocator = memoryOptimizer.getOptimizedAllocator(for: Double.self, count: largeDataSize)
    |             `- warning: initialization of immutable value 'allocator' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
181 |         
182 |         // 执行内存密集型操作

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PerformanceTestSuite.swift:401:13: warning: variable 'meanArray' was never mutated; consider changing to 'let' constant
399 |         
400 |         // 计算方差
401 |         var meanArray = [Double](repeating: mean, count: dataSize)
    |             `- warning: variable 'meanArray' was never mutated; consider changing to 'let' constant
402 |         var diffArray = [Double](repeating: 0, count: dataSize)
403 |         var squaredDiffArray = [Double](repeating: 0, count: dataSize)

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
[20/34] Compiling SkyBridgeCore GCDOptimizer.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/GCDOptimizer.swift:185:13: warning: initialization of immutable value 'systemInfo' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
183 |     /// 计算最优分片大小
184 |     private func calculateOptimalChunkSize(for itemCount: Int) async -> Int {
185 |         let systemInfo = optimizer.getSystemInfo()
    |             `- warning: initialization of immutable value 'systemInfo' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
186 |         let recommendedConcurrency = await qosManager.recommendedConcurrency(for: .dataAnalysis)
187 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/GCDOptimizer.swift:249:17: warning: no 'async' operations occur within 'await' expression
247 |         monitoringTask = Task {
248 |             while !Task.isCancelled && isMonitoring {
249 |                 await updateSystemLoad()
    |                 `- warning: no 'async' operations occur within 'await' expression
250 |                 try? await Task.sleep(nanoseconds: 1_000_000_000) // 1秒更新一次
251 |             }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MemoryOptimizer.swift:60:13: warning: no 'async' operations occur within 'await' expression
 58 |             
 59 |             // 清理内存上下文
 60 |             await context.cleanup()
    |             `- warning: no 'async' operations occur within 'await' expression
 61 |             
 62 |             return result

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:220:23: error: sending 'buffer' risks causing data races [#SendingRisksDataRace]
218 |         commandBuffer.addCompletedHandler { [weak self] buffer in
219 |             Task { @MainActor in
220 |                 self?.handleCommandBufferCompletion(buffer)
    |                       |- error: sending 'buffer' risks causing data races [#SendingRisksDataRace]
    |                       `- note: task-isolated 'buffer' is captured by a main actor-isolated closure. main actor-isolated uses in closure may race against later nonisolated uses
221 |             }
222 |         }

[#SendingRisksDataRace]: <https://docs.swift.org/compiler/documentation/diagnostics/sending-risks-data-race>
[21/34] Compiling SkyBridgeCore MemoryOptimizer.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/GCDOptimizer.swift:185:13: warning: initialization of immutable value 'systemInfo' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
183 |     /// 计算最优分片大小
184 |     private func calculateOptimalChunkSize(for itemCount: Int) async -> Int {
185 |         let systemInfo = optimizer.getSystemInfo()
    |             `- warning: initialization of immutable value 'systemInfo' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
186 |         let recommendedConcurrency = await qosManager.recommendedConcurrency(for: .dataAnalysis)
187 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/GCDOptimizer.swift:249:17: warning: no 'async' operations occur within 'await' expression
247 |         monitoringTask = Task {
248 |             while !Task.isCancelled && isMonitoring {
249 |                 await updateSystemLoad()
    |                 `- warning: no 'async' operations occur within 'await' expression
250 |                 try? await Task.sleep(nanoseconds: 1_000_000_000) // 1秒更新一次
251 |             }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MemoryOptimizer.swift:60:13: warning: no 'async' operations occur within 'await' expression
 58 |             
 59 |             // 清理内存上下文
 60 |             await context.cleanup()
    |             `- warning: no 'async' operations occur within 'await' expression
 61 |             
 62 |             return result

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:220:23: error: sending 'buffer' risks causing data races [#SendingRisksDataRace]
218 |         commandBuffer.addCompletedHandler { [weak self] buffer in
219 |             Task { @MainActor in
220 |                 self?.handleCommandBufferCompletion(buffer)
    |                       |- error: sending 'buffer' risks causing data races [#SendingRisksDataRace]
    |                       `- note: task-isolated 'buffer' is captured by a main actor-isolated closure. main actor-isolated uses in closure may race against later nonisolated uses
221 |             }
222 |         }

[#SendingRisksDataRace]: <https://docs.swift.org/compiler/documentation/diagnostics/sending-risks-data-race>
[22/34] Compiling SkyBridgeCore MetalPerformanceOptimizer.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/GCDOptimizer.swift:185:13: warning: initialization of immutable value 'systemInfo' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
183 |     /// 计算最优分片大小
184 |     private func calculateOptimalChunkSize(for itemCount: Int) async -> Int {
185 |         let systemInfo = optimizer.getSystemInfo()
    |             `- warning: initialization of immutable value 'systemInfo' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
186 |         let recommendedConcurrency = await qosManager.recommendedConcurrency(for: .dataAnalysis)
187 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/GCDOptimizer.swift:249:17: warning: no 'async' operations occur within 'await' expression
247 |         monitoringTask = Task {
248 |             while !Task.isCancelled && isMonitoring {
249 |                 await updateSystemLoad()
    |                 `- warning: no 'async' operations occur within 'await' expression
250 |                 try? await Task.sleep(nanoseconds: 1_000_000_000) // 1秒更新一次
251 |             }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MemoryOptimizer.swift:60:13: warning: no 'async' operations occur within 'await' expression
 58 |             
 59 |             // 清理内存上下文
 60 |             await context.cleanup()
    |             `- warning: no 'async' operations occur within 'await' expression
 61 |             
 62 |             return result

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/MetalPerformanceOptimizer.swift:220:23: error: sending 'buffer' risks causing data races [#SendingRisksDataRace]
218 |         commandBuffer.addCompletedHandler { [weak self] buffer in
219 |             Task { @MainActor in
220 |                 self?.handleCommandBufferCompletion(buffer)
    |                       |- error: sending 'buffer' risks causing data races [#SendingRisksDataRace]
    |                       `- note: task-isolated 'buffer' is captured by a main actor-isolated closure. main actor-isolated uses in closure may race against later nonisolated uses
221 |             }
222 |         }

[#SendingRisksDataRace]: <https://docs.swift.org/compiler/documentation/diagnostics/sending-risks-data-race>
[23/34] Compiling SkyBridgeCore PowerManager.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:47:29: error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 45 |     deinit {
 46 |         // 在deinit中直接清理资源
 47 |         powerMonitoringTimer?.invalidate()
    |                             `- error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 48 |         powerMonitoringTimer = nil
 49 |         

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:48:30: error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 46 |         // 在deinit中直接清理资源
 47 |         powerMonitoringTimer?.invalidate()
 48 |         powerMonitoringTimer = nil
    |                              `- error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 49 |         
 50 |         if let notification = powerSourceNotification {

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:50:9: error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 48 |         powerMonitoringTimer = nil
 49 |         
 50 |         if let notification = powerSourceNotification {
    |         `- error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 51 |             IONotificationPortDestroy(notification)
 52 |             powerSourceNotification = nil

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:52:37: error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 50 |         if let notification = powerSourceNotification {
 51 |             IONotificationPortDestroy(notification)
 52 |             powerSourceNotification = nil
    |                                     `- error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 53 |         }
 54 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:45:31: error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 43 |     deinit {
 44 |         // 在deinit中直接清理资源，避免主线程隔离问题
 45 |         thermalMonitoringTimer?.invalidate()
    |                               `- error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 46 |         thermalMonitoringTimer = nil
 47 |         

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:46:32: error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 44 |         // 在deinit中直接清理资源，避免主线程隔离问题
 45 |         thermalMonitoringTimer?.invalidate()
 46 |         thermalMonitoringTimer = nil
    |                                `- error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 47 |         
 48 |         if let notificationSource = thermalNotificationSource {

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:48:9: error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 46 |         thermalMonitoringTimer = nil
 47 |         
 48 |         if let notificationSource = thermalNotificationSource {
    |         `- error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 49 |             IONotificationPortDestroy(notificationSource)
 50 |             thermalNotificationSource = nil

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:50:39: error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 48 |         if let notificationSource = thermalNotificationSource {
 49 |             IONotificationPortDestroy(notificationSource)
 50 |             thermalNotificationSource = nil
    |                                       `- error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 51 |         }
 52 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
[24/34] Compiling SkyBridgeCore ThermalManager.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:47:29: error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 45 |     deinit {
 46 |         // 在deinit中直接清理资源
 47 |         powerMonitoringTimer?.invalidate()
    |                             `- error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 48 |         powerMonitoringTimer = nil
 49 |         

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:48:30: error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 46 |         // 在deinit中直接清理资源
 47 |         powerMonitoringTimer?.invalidate()
 48 |         powerMonitoringTimer = nil
    |                              `- error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 49 |         
 50 |         if let notification = powerSourceNotification {

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:50:9: error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 48 |         powerMonitoringTimer = nil
 49 |         
 50 |         if let notification = powerSourceNotification {
    |         `- error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 51 |             IONotificationPortDestroy(notification)
 52 |             powerSourceNotification = nil

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:52:37: error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 50 |         if let notification = powerSourceNotification {
 51 |             IONotificationPortDestroy(notification)
 52 |             powerSourceNotification = nil
    |                                     `- error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 53 |         }
 54 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:45:31: error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 43 |     deinit {
 44 |         // 在deinit中直接清理资源，避免主线程隔离问题
 45 |         thermalMonitoringTimer?.invalidate()
    |                               `- error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 46 |         thermalMonitoringTimer = nil
 47 |         

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:46:32: error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 44 |         // 在deinit中直接清理资源，避免主线程隔离问题
 45 |         thermalMonitoringTimer?.invalidate()
 46 |         thermalMonitoringTimer = nil
    |                                `- error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 47 |         
 48 |         if let notificationSource = thermalNotificationSource {

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:48:9: error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 46 |         thermalMonitoringTimer = nil
 47 |         
 48 |         if let notificationSource = thermalNotificationSource {
    |         `- error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 49 |             IONotificationPortDestroy(notificationSource)
 50 |             thermalNotificationSource = nil

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:50:39: error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 48 |         if let notificationSource = thermalNotificationSource {
 49 |             IONotificationPortDestroy(notificationSource)
 50 |             thermalNotificationSource = nil
    |                                       `- error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 51 |         }
 52 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
[25/34] Compiling SkyBridgeCore RemoteTextureFeed.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:47:29: error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 45 |     deinit {
 46 |         // 在deinit中直接清理资源
 47 |         powerMonitoringTimer?.invalidate()
    |                             `- error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 48 |         powerMonitoringTimer = nil
 49 |         

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:48:30: error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 46 |         // 在deinit中直接清理资源
 47 |         powerMonitoringTimer?.invalidate()
 48 |         powerMonitoringTimer = nil
    |                              `- error: cannot access property 'powerMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 49 |         
 50 |         if let notification = powerSourceNotification {

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:50:9: error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 48 |         powerMonitoringTimer = nil
 49 |         
 50 |         if let notification = powerSourceNotification {
    |         `- error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 51 |             IONotificationPortDestroy(notification)
 52 |             powerSourceNotification = nil

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/PowerManager.swift:52:37: error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 50 |         if let notification = powerSourceNotification {
 51 |             IONotificationPortDestroy(notification)
 52 |             powerSourceNotification = nil
    |                                     `- error: cannot access property 'powerSourceNotification' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 53 |         }
 54 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:45:31: error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 43 |     deinit {
 44 |         // 在deinit中直接清理资源，避免主线程隔离问题
 45 |         thermalMonitoringTimer?.invalidate()
    |                               `- error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 46 |         thermalMonitoringTimer = nil
 47 |         

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:46:32: error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 44 |         // 在deinit中直接清理资源，避免主线程隔离问题
 45 |         thermalMonitoringTimer?.invalidate()
 46 |         thermalMonitoringTimer = nil
    |                                `- error: cannot access property 'thermalMonitoringTimer' with a non-Sendable type 'Timer?' from nonisolated deinit
 47 |         
 48 |         if let notificationSource = thermalNotificationSource {

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:48:9: error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 46 |         thermalMonitoringTimer = nil
 47 |         
 48 |         if let notificationSource = thermalNotificationSource {
    |         `- error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 49 |             IONotificationPortDestroy(notificationSource)
 50 |             thermalNotificationSource = nil

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/Performance/ThermalManager.swift:50:39: error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 48 |         if let notificationSource = thermalNotificationSource {
 49 |             IONotificationPortDestroy(notificationSource)
 50 |             thermalNotificationSource = nil
    |                                       `- error: cannot access property 'thermalNotificationSource' with a non-Sendable type 'IONotificationPortRef?' (aka 'Optional<OpaquePointer>') from nonisolated deinit
 51 |         }
 52 |     }

Swift.Optional:1:21: note: generic enum 'Optional' does not conform to the 'Sendable' protocol
1 | @frozen public enum Optional<Wrapped> : ~Copyable, ~Escapable where Wrapped : ~Copyable, Wrapped : ~Escapable {
  |                     `- note: generic enum 'Optional' does not conform to the 'Sendable' protocol
2 |     case none
3 |     case some(Wrapped)
[26/34] Compiling SkyBridgeCore WeatherMLPredictor.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:55:23: error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
  7 | 
  8 | /// 天气数据结构
  9 | public struct WeatherData {
    |               `- note: consider making struct 'WeatherData' conform to the 'Sendable' protocol
 10 |     public let weatherType: WeatherType
 11 |     public let intensity: Double
    :
 53 |     
 54 |     /// 默认天气数据
 55 |     public static let `default` = WeatherData(
    |                       |- error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'default' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
 56 |         weatherType: .clear,
 57 |         intensity: 0.5,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:148:35: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
146 |         
147 |         if currentWeather.cloudCoverage < 0.3 && currentWeather.pressure > 1020 {
148 |             possibleTypes.append(.sunny)
    |                                   `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
149 |         }
150 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:174:13: warning: initialization of immutable value 'humidityTrend' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
172 |         
173 |         // 分析湿度趋势
174 |         let humidityTrend = analyzeTrend(values: recent.map { $0.humidity })
    |             `- warning: initialization of immutable value 'humidityTrend' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
175 |         
176 |         // 综合判断

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:311:37: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
309 |         // 规则3: 气压上升 + 湿度下降 = 天气转晴
310 |         if pressureTrend == .rising && humidityTrend == .falling && currentWeather.pressure > 1015 {
311 |             predictedWeatherType = .sunny
    |                                     `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
312 |             confidence = 0.7
313 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:371:37: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
369 |             predictedWeatherType = .snow
370 |         } else if predictedPressure > 1020 && predictedHumidity < 50 {
371 |             predictedWeatherType = .sunny
    |                                     `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
372 |         }
373 |         

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
[27/34] Compiling SkyBridgeCore DeviceManagementExtensionManager.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:55:23: error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
  7 | 
  8 | /// 天气数据结构
  9 | public struct WeatherData {
    |               `- note: consider making struct 'WeatherData' conform to the 'Sendable' protocol
 10 |     public let weatherType: WeatherType
 11 |     public let intensity: Double
    :
 53 |     
 54 |     /// 默认天气数据
 55 |     public static let `default` = WeatherData(
    |                       |- error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'default' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
 56 |         weatherType: .clear,
 57 |         intensity: 0.5,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:148:35: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
146 |         
147 |         if currentWeather.cloudCoverage < 0.3 && currentWeather.pressure > 1020 {
148 |             possibleTypes.append(.sunny)
    |                                   `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
149 |         }
150 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:174:13: warning: initialization of immutable value 'humidityTrend' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
172 |         
173 |         // 分析湿度趋势
174 |         let humidityTrend = analyzeTrend(values: recent.map { $0.humidity })
    |             `- warning: initialization of immutable value 'humidityTrend' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
175 |         
176 |         // 综合判断

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:311:37: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
309 |         // 规则3: 气压上升 + 湿度下降 = 天气转晴
310 |         if pressureTrend == .rising && humidityTrend == .falling && currentWeather.pressure > 1015 {
311 |             predictedWeatherType = .sunny
    |                                     `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
312 |             confidence = 0.7
313 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:371:37: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
369 |             predictedWeatherType = .snow
370 |         } else if predictedPressure > 1020 && predictedHumidity < 50 {
371 |             predictedWeatherType = .sunny
    |                                     `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
372 |         }
373 |         

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
[28/34] Compiling SkyBridgeCore DeviceManagementSettingsManager.swift
/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:55:23: error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
  7 | 
  8 | /// 天气数据结构
  9 | public struct WeatherData {
    |               `- note: consider making struct 'WeatherData' conform to the 'Sendable' protocol
 10 |     public let weatherType: WeatherType
 11 |     public let intensity: Double
    :
 53 |     
 54 |     /// 默认天气数据
 55 |     public static let `default` = WeatherData(
    |                       |- error: static property 'default' is not concurrency-safe because non-'Sendable' type 'WeatherData' may have shared mutable state [#MutableGlobalVariable]
    |                       |- note: add '@MainActor' to make static property 'default' part of global actor 'MainActor'
    |                       `- note: disable concurrency-safety checks if accesses are protected by an external synchronization mechanism
 56 |         weatherType: .clear,
 57 |         intensity: 0.5,

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:148:35: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
146 |         
147 |         if currentWeather.cloudCoverage < 0.3 && currentWeather.pressure > 1020 {
148 |             possibleTypes.append(.sunny)
    |                                   `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
149 |         }
150 |         

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:174:13: warning: initialization of immutable value 'humidityTrend' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
172 |         
173 |         // 分析湿度趋势
174 |         let humidityTrend = analyzeTrend(values: recent.map { $0.humidity })
    |             `- warning: initialization of immutable value 'humidityTrend' was never used; consider replacing with assignment to '_' or removing it [#no-usage]
175 |         
176 |         // 综合判断

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:311:37: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
309 |         // 规则3: 气压上升 + 湿度下降 = 天气转晴
310 |         if pressureTrend == .rising && humidityTrend == .falling && currentWeather.pressure > 1015 {
311 |             predictedWeatherType = .sunny
    |                                     `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
312 |             confidence = 0.7
313 |         }

/Users/macbookpro/Skybridge-Compass-2/macos/SkyBridgeCompassApp/Sources/SkyBridgeCore/ML/WeatherMLPredictor.swift:371:37: error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
369 |             predictedWeatherType = .snow
370 |         } else if predictedPressure > 1020 && predictedHumidity < 50 {
371 |             predictedWeatherType = .sunny
    |                                     `- error: type 'WeatherType' (aka 'WeatherDataService.WeatherType') has no member 'sunny'
372 |         }
373 |         

[#MutableGlobalVariable]: <https://docs.swift.org/compiler/documentation/diagnostics/mutable-global-variable>
